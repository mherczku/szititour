"use strict";(self.webpackChunkszititour=self.webpackChunkszititour||[]).push([[517],{7517:(ve,y,r)=>{r.r(y),r.d(y,{USER_ROUTES:()=>Ce});var l=r(6814),e=r(9468),C=r(8281),A=r(5442),M=r(5411),d=r(1993),h=r(5393),T=r(9890);const k=function(i,o){return{"btn-simple-red":i,"btn-simple-green":o}};let $=(()=>{var i;class o{set game(t){this.$game.set(t)}constructor(t,n,a){this.cd=t,this.userService=n,this.destroyRef=a,this.$game=(0,e.tdS)({applications:[],dateEnd:new Date,dateStart:new Date,id:0,places:[],title:"Test Title",active:!1}),this.$btnType=(0,e.Flj)(()=>{const c=this.$game();return c.active?"accepted"===c.userApplied?"GREEN":"DISABLED":"accepted"===c.userApplied||"applied"===c.userApplied?"RED":"declined"===c.userApplied?"DISABLED":"GREEN"}),this.$btnText=(0,e.Flj)(()=>{const c=this.$game();return c.active?"accepted"===c.userApplied?"\xcdr\xe1ny a j\xe1t\xe9k":"applied"===c.userApplied?"Akt\xedv j\xe1t\xe9k":"declined"===c.userApplied?"Elutas\xedtva":"Akt\xedv j\xe1t\xe9k":"accepted"===c.userApplied?"Elfogadva - visszavon\xe1s":"applied"===c.userApplied?"Visszavon\xe1s":"declined"===c.userApplied?"Elutas\xedtva":"Jelentkez\xe9s"})}applyBtnClicked(){this.$game().active||("applied"===this.$game().userApplied||"accepted"===this.$game().userApplied?this.cancelApplicationForGame():"none"===this.$game().userApplied&&this.applyForGame())}applyForGame(){this.userService.applyForGame(this.$game().id).pipe((0,d.sL)(this.destroyRef)).subscribe({next:t=>{this.game=t,this.cd.markForCheck()}})}cancelApplicationForGame(){this.userService.cancelApplicationForGame(this.$game().id).pipe((0,d.sL)(this.destroyRef)).subscribe({next:t=>{this.game=t,this.cd.markForCheck()}})}}return(i=o).\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO),e.Y36(h.K),e.Y36(e.ktI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-user-game-card"]],inputs:{game:"game"},standalone:!0,features:[e.jDz],decls:14,vars:24,consts:[[1,"card-game"],[3,"src","alt"],[1,"details"],[1,"text-size-lg","bold"],[1,"text-size-base","date-input-d"],[1,"btn-simple",3,"routerLink","disabled","ngClass","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"img",1),e.ALo(2,"async"),e.ALo(3,"imgLoader"),e.ALo(4,"imgSrc"),e.TgZ(5,"div",2)(6,"p",3),e._uU(7),e.qZA(),e.TgZ(8,"p",4),e._uU(9),e.ALo(10,"date"),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"button",5),e.NdJ("click",function(){return n.applyBtnClicked()}),e._uU(13),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("src",e.lcZ(2,9,e.lcZ(3,11,e.lcZ(4,13,n.$game().img))),e.LSH)("alt",n.$game().title),e.xp6(6),e.Oqu(n.$game().title),e.xp6(2),e.AsE("",e.xi3(10,15,n.$game().dateStart,"y.MM.d. H:mm")," - ",e.xi3(11,18,n.$game().dateEnd,"H:mm")," "),e.xp6(3),e.Q6J("routerLink",n.$game().active&&"accepted"===n.$game().userApplied?"/user/active/"+n.$game().id:void 0)("disabled","DISABLED"===n.$btnType())("ngClass",e.WLB(21,k,"RED"===n.$btnType(),"GREEN"===n.$btnType())),e.xp6(1),e.hij(" ",n.$btnText(),""))},dependencies:[l.ez,l.mk,l.Ov,l.uU,C.rH,A.m,T.G,M.f],styles:[".card-game[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:400px;margin:auto;height:100%;gap:10px;border-radius:8px;background:#ffffff;box-shadow:20px 20px 60px #d9d9d9,-20px -20px 60px #fff}.card-game[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;aspect-ratio:16/9;border-radius:8px 8px 0 0}.card-game[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{flex-grow:1;padding:1rem;display:flex;flex-direction:column}.card-game[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .date-input-d[_ngcontent-%COMP%]{flex-grow:1}.card-game[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:20px;width:100%}[_nghost-%COMP%]{height:100%;width:100%}"],changeDetection:0}),o})();var v=r(5624);function E(i,o){1&i&&e._UZ(0,"app-user-game-card",2),2&i&&e.Q6J("game",o.$implicit)}let F=(()=>{var i;class o{constructor(t,n){this.authService=t,this.userService=n,this.$profile=this.authService.$currentTeamR}ngOnInit(){this.games=this.userService.getGames()}}return(i=o).\u0275fac=function(t){return new(t||i)(e.Y36(v.e),e.Y36(h.K))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-home"]],standalone:!0,features:[e.jDz],decls:3,vars:3,consts:[[1,"grid-games"],[3,"game",4,"ngFor","ngForOf"],[3,"game"]],template:function(t,n){1&t&&(e.TgZ(0,"section",0),e.YNc(1,E,1,1,"app-user-game-card",1),e.ALo(2,"async"),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,n.games)))},dependencies:[l.ez,l.sg,l.Ov,$],styles:[".grid-games[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:1.5rem}@media (max-width: 1050px){.grid-games[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (max-width: 600px){.grid-games[_ngcontent-%COMP%]{grid-template-columns:repeat(1,minmax(0,1fr))}}.center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.grid-games[_ngcontent-%COMP%]{padding:2rem;place-items:center}.welcome[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:2rem;text-align:center}"],changeDetection:0}),o})();var m=r(9397),z=r(4547),p=r(762),g=r(6223),S=r(6492),J=r(553),P=r(8180),f=r(9393),q=r(9862),b=r(198);let O=(()=>{var i;class o{constructor(t,n){this.http=t,this.store=n,this.baseUrl=J.N.apiBaseUrl+"/user",this.changedAnswers=new Map}addAnswer(t,n){this.changedAnswers.set(t,n)}getActiveGameData(t){return this.http.get(`${this.baseUrl}/activegame/${t}`).pipe((0,m.b)(n=>{this.store.dispatch((0,f.u)({gameState:n.teamGameStatusDto}))}))}getTeamGameStatus(t){return this.http.get(`${this.baseUrl}/status/${t}`).pipe((0,m.b)(n=>{this.store.dispatch((0,f.u)({gameState:n}))}))}loadTeamGameStatus(t){return this.http.get(`${this.baseUrl}/status/${t}`).pipe((0,m.b)(n=>{this.store.dispatch((0,f.u)({gameState:n}))})).pipe((0,P.q)(1)).subscribe()}answerQuestions(t,n){return this.http.post(`${this.baseUrl}/answers`,{gameId:t,questionAnswers:n}).pipe((0,m.b)(c=>{this.store.dispatch((0,f.u)({gameState:c}))}))}answerQuestionWithImage(t,n){const a=new FormData;return a.append("image",n),this.http.post(`${this.baseUrl}/answer/${t}/image`,a)}}return(i=o).\u0275fac=function(t){return new(t||i)(e.LFG(q.eN),e.LFG(b.yh))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),o})();function G(i,o){if(1&i&&(e._UZ(0,"img",9),e.ALo(1,"async"),e.ALo(2,"imgLoader"),e.ALo(3,"imgSrc")),2&i){const s=e.oxw();e.Q6J("src",e.lcZ(1,1,e.lcZ(2,3,e.lcZ(3,5,s._question.img))),e.LSH)}}function I(i,o){if(1&i){const s=e.EpF();e.ynx(0),e.TgZ(1,"app-image-uploader",10),e.NdJ("fileChanged",function(n){e.CHM(s);const a=e.oxw();return e.KtG(a.inputFileChanged(n))}),e.ALo(2,"async"),e.ALo(3,"imgLoader"),e.ALo(4,"imgSrc"),e.qZA(),e.BQk()}if(2&i){const s=e.oxw();e.xp6(1),e.Q6J("src",e.lcZ(2,1,e.lcZ(3,3,e.lcZ(4,5,null==s._savedAnswer?null:s._savedAnswer.img))))}}function Q(i,o){if(1&i){const s=e.EpF();e.TgZ(0,"input",11),e.NdJ("ngModelChange",function(n){e.CHM(s);const a=e.oxw();return e.KtG(a.changed(n))}),e.qZA()}if(2&i){const s=e.oxw();e.Q6J("ngModel",s.currentAnswer)}}function N(i,o){if(1&i){const s=e.EpF();e.TgZ(0,"input",11),e.NdJ("ngModelChange",function(n){e.CHM(s);const a=e.oxw();return e.KtG(a.changed(n))}),e.qZA()}if(2&i){const s=e.oxw();e.Q6J("ngModel",s.currentAnswer)}}function D(i,o){if(1&i){const s=e.EpF();e.TgZ(0,"input",12),e.NdJ("ngModelChange",function(n){e.CHM(s);const a=e.oxw();return e.KtG(a.changed(n))}),e.qZA()}if(2&i){const s=e.oxw();e.Q6J("ngModel",s.currentAnswer)}}function U(i,o){if(1&i){const s=e.EpF();e.TgZ(0,"input",12),e.NdJ("ngModelChange",function(n){e.CHM(s);const a=e.oxw();return e.KtG(a.changed(n))}),e.qZA()}if(2&i){const s=e.oxw();e.Q6J("ngModel",s.currentAnswer)}}const L=function(i){return{differentAnswer:i}};let R=(()=>{var i;class o{set question(t){this._question=t,this.setCurrentAnswerData()}set teamStatus(t){this._teamStatus=t,this.setCurrentAnswerData()}constructor(t){this.activeGameService=t,this.QuestionType=p.c,this.currentAnswer="",this.answerIsSame=!1,this.currentImgChanged=!1}setCurrentAnswerData(){if(this._question&&this._teamStatus){switch(this._savedAnswer=this._teamStatus?.placeStatuses?.find(t=>t.placeId===this._question.placeId)?.qanswers?.find(t=>t.questionDtoNoAnswers.id===this._question.id),this._question.type){case p.c.shortText:case p.c.longText:this.currentAnswer=this._savedAnswer?.answerText??"";break;case p.c.number:this.currentAnswer=this._savedAnswer?.answerNumber??"";break;case p.c.imgOnly:this.currentImgChanged=!1;break;case p.c.year:this.currentAnswer=this._savedAnswer?.answerNumber??""}this.setIsAnswerSameAsStatus()}}setIsAnswerSameAsStatus(){switch(this._question.type){case p.c.shortText:case p.c.longText:this.answerIsSame=this.currentAnswer===this._savedAnswer?.answerText;break;case p.c.number:this.answerIsSame=this.currentAnswer===this._savedAnswer?.answerNumber;break;case p.c.imgOnly:this.answerIsSame=!this.currentImgChanged;break;case p.c.year:this.answerIsSame=this.currentAnswer===this._savedAnswer?.answerNumber}}changed(t){if(this.currentAnswer=t,this.setIsAnswerSameAsStatus(),!this.answerIsSame)switch(this._question.type){case p.c.shortText:case p.c.longText:this.activeGameService.addAnswer(this._question.id,{answerText:String(t)});break;case p.c.number:this.activeGameService.addAnswer(this._question.id,{answerNumber:Number(t)});break;case p.c.imgOnly:return;case p.c.year:this.activeGameService.addAnswer(this._question.id,{answerNumber:Number(t)})}}inputFileChanged(t){this.currentImgChanged=!0,this.activeGameService.addAnswer(this._question.id,{imgFile:t}),this.setIsAnswerSameAsStatus()}}return(i=o).\u0275fac=function(t){return new(t||i)(e.Y36(O))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-question-card"]],inputs:{index:"index",question:"question",teamStatus:"teamStatus"},standalone:!0,features:[e.jDz],decls:13,vars:13,consts:[[1,"holder-question"],[1,"text-size-base","bold","question-title"],[1,"question-body",3,"ngClass"],[1,"text-size-base"],["class","object-contain max-h-[300px] aspect-video",3,"src",4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],["placeholder","V\xe1lasz","type","text",3,"ngModel","ngModelChange",4,"ngSwitchCase"],["placeholder","0","type","number",3,"ngModel","ngModelChange",4,"ngSwitchCase"],[1,"object-contain","max-h-[300px]","aspect-video",3,"src"],[1,"max-h-[300px]","aspect-video",3,"src","fileChanged"],["placeholder","V\xe1lasz","type","text",3,"ngModel","ngModelChange"],["placeholder","0","type","number",3,"ngModel","ngModelChange"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"p",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"p",3),e._uU(5),e.qZA(),e.YNc(6,G,4,7,"img",4),e.ynx(7,5),e.YNc(8,I,5,7,"ng-container",6),e.YNc(9,Q,1,1,"input",7),e.YNc(10,N,1,1,"input",7),e.YNc(11,D,1,1,"input",8),e.YNc(12,U,1,1,"input",8),e.BQk(),e.qZA()()),2&t&&(e.xp6(2),e.AsE("",n._question.riddle?"Rejtv\xe9ny":""," K\xe9rd\xe9s ",n.index+1,""),e.xp6(1),e.Q6J("ngClass",e.VKq(11,L,!n.answerIsSame)),e.xp6(2),e.Oqu(n._question.name),e.xp6(1),e.Q6J("ngIf",n._question.img),e.xp6(1),e.Q6J("ngSwitch",n._question.type),e.xp6(1),e.Q6J("ngSwitchCase",n.QuestionType.imgOnly),e.xp6(1),e.Q6J("ngSwitchCase",n.QuestionType.longText),e.xp6(1),e.Q6J("ngSwitchCase",n.QuestionType.shortText),e.xp6(1),e.Q6J("ngSwitchCase",n.QuestionType.number),e.xp6(1),e.Q6J("ngSwitchCase",n.QuestionType.year))},dependencies:[l.ez,l.mk,l.O5,l.RF,l.n9,l.Ov,g.u5,g.Fj,g.wV,g.JJ,g.On,A.m,T.G,S.$,M.f],styles:[".holder-question[_ngcontent-%COMP%]{border-radius:8px;border:1px solid black;position:relative;display:flex;flex-direction:column;max-width:400px;height:100%}.holder-question[_ngcontent-%COMP%]   .question-title[_ngcontent-%COMP%]{top:0;left:0;width:100%;background:rgba(0,0,0,.17);padding:5px 10px}.holder-question[_ngcontent-%COMP%]   .question-body[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;gap:10px;background:rgba(0,255,49,.11);flex-grow:1}.holder-question[_ngcontent-%COMP%]   .question-body.differentAnswer[_ngcontent-%COMP%]{background:rgba(0,133,205,.11)}.holder-question[_ngcontent-%COMP%]   .question-body[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:rgba(0,0,0,.13);padding:10px;border-radius:8px}"],changeDetection:0}),o})();const j=(0,b.ZF)("game"),K=(0,b.P1)(j,i=>i.teamGameStatus);var H=r(2539),B=r(9516);function X(i,o){if(1&i){const s=e.EpF();e.TgZ(0,"app-place-card",6),e.NdJ("click",function(){const a=e.CHM(s).$implicit,c=e.oxw();return e.KtG(c.selectPlace(a))}),e.qZA()}if(2&i){const s=o.$implicit,t=o.index,n=e.oxw();e.Q6J("selected",n.$selectedPlace()===s)("place",s)("index",t)}}function V(i,o){if(1&i&&(e._UZ(0,"app-question-card",7),e.ALo(1,"async")),2&i){const s=o.$implicit,t=o.index,n=e.oxw();e.Q6J("teamStatus",e.lcZ(1,3,n.teamStatus$))("index",t)("question",s)}}let W=(()=>{var i;class o{constructor(t,n,a,c,_){this.activatedRoute=t,this.activeGameService=n,this.store=a,this.locationsService=c,this.destroyRef=_,this.myTrackBy=H.Gp,this.$selectedPlace=(0,e.tdS)(void 0),this.teamStatus$=this.store.select(K),this.gameId=-1}ngOnInit(){this.activatedRoute.params.subscribe(t=>{const n=t.id;n&&(this.gameId=n,this.locationsService.trackMe(this.gameId),this.activeGame$=this.activeGameService.getActiveGameData(n).pipe((0,m.b)(a=>{this.$selectedPlace.set(a.places[0])})))})}selectPlace(t){t.selectable&&this.$selectedPlace.set(t)}postAnswers(){const t=[];this.activeGameService.changedAnswers.forEach((n,a)=>{n.imgFile?this.activeGameService.answerQuestionWithImage(a,n.imgFile).pipe((0,d.sL)(this.destroyRef)).subscribe(c=>{this.activeGameService.changedAnswers.delete(a),this.store.dispatch((0,f.u)({gameState:c}))}):t.push({questionId:a,answer:n})}),t.length>0&&this.activeGameService.answerQuestions(this.gameId,t).pipe((0,d.sL)(this.destroyRef)).subscribe(()=>{t.forEach(n=>{this.activeGameService.changedAnswers.delete(n.questionId)})})}}return(i=o).\u0275fac=function(t){return new(t||i)(e.Y36(C.gz),e.Y36(O),e.Y36(b.yh),e.Y36(B.a),e.Y36(e.ktI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-active-game"]],standalone:!0,features:[e.jDz],decls:8,vars:6,consts:[[1,"holder-places"],[3,"selected","place","index","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"holder-questions"],[3,"teamStatus","index","question",4,"ngFor","ngForOf","ngForTrackBy"],[1,"section-btn"],[1,"btn-simple",3,"click"],[3,"selected","place","index","click"],[3,"teamStatus","index","question"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,X,1,3,"app-place-card",1),e.ALo(2,"async"),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,V,2,5,"app-question-card",3),e.qZA(),e.TgZ(5,"div",4)(6,"button",5),e.NdJ("click",function(){return n.postAnswers()}),e._uU(7,"Ment\xe9s"),e.qZA()()),2&t){let a,c;e.xp6(1),e.Q6J("ngForOf",null==(a=e.lcZ(2,4,n.activeGame$))?null:a.places)("ngForTrackBy",n.myTrackBy),e.xp6(3),e.Q6J("ngForOf",null==(c=n.$selectedPlace())?null:c.questions)("ngForTrackBy",n.myTrackBy)}},dependencies:[l.ez,l.sg,l.Ov,z.$,R],styles:[".holder-places[_ngcontent-%COMP%]{display:flex;flex-direction:row;overflow-x:auto;gap:15px;padding:20px 30px;scroll-behavior:smooth}.holder-places[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.holder-questions[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,300px));grid-gap:15px;place-content:center}.section-btn[_ngcontent-%COMP%]{margin:1.5rem auto;display:flex;justify-content:center}"],changeDetection:0}),o})();var ee=r(7747),te=r(7278);function ne(i,o){1&i&&e._UZ(0,"span",10)}function ie(i,o){1&i&&e._UZ(0,"img",11)}function se(i,o){1&i&&e._UZ(0,"img",12)}let oe=(()=>{var i;class o{constructor(t,n,a){this.userService=t,this.authService=n,this.destroyRef=a,this.$loading=(0,e.tdS)(!1),this.isActive=this.authService.getTokenId()===this.client?.tokenId}ngOnInit(){this.isActive=this.authService.getTokenId()===this.client?.tokenId}revokeAccess(){this.client.tokenId&&(this.$loading.set(!0),this.userService.revokeToken(this.client.tokenId).pipe((0,P.q)(1),(0,d.sL)(this.destroyRef)).subscribe({complete:()=>this.$loading.set(!1),error:()=>this.$loading.set(!1)}))}}return(i=o).\u0275fac=function(t){return new(t||i)(e.Y36(h.K),e.Y36(v.e),e.Y36(e.ktI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-client-card"]],inputs:{client:"client"},standalone:!0,features:[e.jDz],decls:13,vars:8,consts:[[1,"client-card"],["title","Akt\xedv eszk\xf6z","class","active",4,"ngIf"],[1,"platform"],[1,"text-size-base"],["title","Mobil kliens","class","img","src","assets/svg/mobile.svg","alt","MobileLogin",4,"ngIf"],[1,"browser","text-size-base"],[1,"ip","text-size-base"],["title","Google azonos\xedt\xe1s","class","img img-google","src","assets/svg/google.svg","alt","GoogleLogin",4,"ngIf"],["title","T\xf6rl\xe9s",1,"btn-remove","btn",3,"disabled","click"],["src","assets/svg/remove.svg","alt","Remove",1,"img"],["title","Akt\xedv eszk\xf6z",1,"active"],["title","Mobil kliens","src","assets/svg/mobile.svg","alt","MobileLogin",1,"img"],["title","Google azonos\xedt\xe1s","src","assets/svg/google.svg","alt","GoogleLogin",1,"img","img-google"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,ne,1,0,"span",1),e.TgZ(2,"div",2)(3,"p",3),e._uU(4),e.qZA(),e.YNc(5,ie,1,0,"img",4),e.qZA(),e.TgZ(6,"p",5),e._uU(7),e.qZA(),e.TgZ(8,"p",6),e._uU(9),e.qZA(),e.YNc(10,se,1,0,"img",7),e.TgZ(11,"button",8),e.NdJ("click",function(){return n.revokeAccess()}),e._UZ(12,"img",9),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngIf",n.isActive),e.xp6(3),e.AsE("Rendszer: ",n.client.platform," ",n.client.isMobile,""),e.xp6(1),e.Q6J("ngIf",n.client.isMobile||"Android"===n.client.platform),e.xp6(2),e.hij("B\xf6ng\xe9sz\u0151: ",n.client.brand,""),e.xp6(2),e.hij("IP c\xedm: ",n.client.ipAddress,""),e.xp6(1),e.Q6J("ngIf",n.client.google),e.xp6(1),e.Q6J("disabled",n.$loading()))},dependencies:[l.ez,l.O5],styles:[".img[_ngcontent-%COMP%]{width:20px;aspect-ratio:1;object-fit:cover}p[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.img-google[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px}.btn-remove[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:10px}.platform[_ngcontent-%COMP%]{display:flex;gap:10px;flex-direction:row;width:90%;overflow:hidden}.active[_ngcontent-%COMP%]{position:absolute;top:5px;left:5px;aspect-ratio:1;border-radius:100%;background:rgb(78,255,47);width:10px;display:block}.client-card[_ngcontent-%COMP%]{overflow:hidden;position:relative;background-color:#fff;padding:12px;border-radius:8px;width:100%;box-shadow:3px 3px 5px 2px #00000061}"],changeDetection:0}),o})(),ae=(()=>{var i;class o{}return(i=o).\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-toggler"]],inputs:{isOn:"isOn"},standalone:!0,features:[e.jDz],decls:4,vars:1,consts:[[1,"toggler"],["type","checkbox",3,"ngModel"],[1,"toggler-bg"],[1,"toggler-ball"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"input",1),e.TgZ(2,"span",2),e._UZ(3,"span",3),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngModel",n.isOn))},dependencies:[l.ez,g.u5,g.Wl,g.JJ,g.On],styles:[".toggler[_ngcontent-%COMP%]{position:relative;width:70px;height:30px;background-color:silver;padding:3px;border-radius:20px;cursor:pointer}.toggler[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{z-index:1;visibility:hidden;cursor:pointer;top:0;left:0;position:absolute;height:100%;width:100%}.toggler[_ngcontent-%COMP%]   .toggler-bg[_ngcontent-%COMP%]{border-radius:20px;position:absolute;width:100%;height:-moz-fit-content;height:fit-content;top:4px;left:5px;transition:all .3s}.toggler[_ngcontent-%COMP%]   .toggler-bg[_ngcontent-%COMP%]   .toggler-ball[_ngcontent-%COMP%]{position:absolute;aspect-ratio:1;transition:all .3s;width:30%;border-radius:20px;background-color:red}.toggler[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked ~ .toggler-bg[_ngcontent-%COMP%]{transform:translate(calc(70% - 10px));-webkit-transform:translateX(calc(70% - 10px))}.toggler[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked ~ .toggler-bg[_ngcontent-%COMP%]   .toggler-ball[_ngcontent-%COMP%]{background-color:green}"],changeDetection:0}),o})();var re=r(9315),ce=r(2644),Z=r(2606);function le(i,o){if(1&i){const s=e.EpF();e.TgZ(0,"app-buttons",31),e.NdJ("click",function(){e.CHM(s);const n=e.oxw(2);return e.KtG(n.addMember())}),e.qZA()}}function pe(i,o){if(1&i){const s=e.EpF();e.TgZ(0,"div",32)(1,"button",33),e.NdJ("click",function(){e.CHM(s);const n=e.oxw(2);return e.KtG(n.cancelEmailChange())}),e._UZ(2,"img",34),e.qZA(),e.TgZ(3,"p",35),e._uU(4),e.qZA()()}if(2&i){const s=e.oxw(2);e.xp6(1),e.Q6J("disabled",s.$saving()),e.xp6(3),e.hij("*V\xe1ltoztat\xe1s alatt: ",s.$profile().nextEmail,"")}}function de(i,o){1&i&&e._UZ(0,"img",36)}function ge(i,o){1&i&&e._UZ(0,"app-client-card",37),2&i&&e.Q6J("client",o.$implicit)}function ue(i,o){if(1&i){const s=e.EpF();e.TgZ(0,"section",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"app-image-uploader",6),e.NdJ("fileChanged",function(n){e.CHM(s);const a=e.oxw();return e.KtG(a.fileChange(n))}),e.ALo(6,"async"),e.ALo(7,"imgLoader"),e.ALo(8,"imgSrc"),e.qZA()(),e.TgZ(9,"app-text-input",7),e.NdJ("valueChange",function(n){e.CHM(s);const a=e.oxw();return e.KtG(a.$profile().name=n)}),e.qZA(),e.TgZ(10,"div",8)(11,"div",9)(12,"p",10),e._uU(13,"Csapattagok:"),e.qZA(),e.YNc(14,le,1,0,"app-buttons",11),e.qZA(),e.TgZ(15,"app-text-input",7),e.NdJ("valueChange",function(n){e.CHM(s);const a=e.oxw();return e.KtG(a.$profile().members[0]=n)}),e.qZA(),e.TgZ(16,"app-text-input",7),e.NdJ("valueChange",function(n){e.CHM(s);const a=e.oxw();return e.KtG(a.$profile().members[1]=n)}),e.qZA(),e.TgZ(17,"app-text-input",7),e.NdJ("valueChange",function(n){e.CHM(s);const a=e.oxw();return e.KtG(a.$profile().members[2]=n)}),e.qZA(),e.TgZ(18,"app-text-input",7),e.NdJ("valueChange",function(n){e.CHM(s);const a=e.oxw();return e.KtG(a.$profile().members[3]=n)}),e.qZA()(),e.TgZ(19,"button",12),e.NdJ("click",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.saveProfile())}),e._uU(20,"Ment\xe9s"),e.qZA()()(),e.TgZ(21,"div",13)(22,"div"),e.YNc(23,pe,5,2,"div",14),e.TgZ(24,"app-text-input",7),e.NdJ("valueChange",function(n){e.CHM(s);const a=e.oxw();return e.KtG(a.$profile().email=n)}),e.qZA()(),e.TgZ(25,"button",15),e.NdJ("click",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.saveEmail())}),e._uU(26,"M\xf3dos\xedt\xe1s"),e.qZA()()(),e.TgZ(27,"div",16)(28,"div",17)(29,"h3",18),e._uU(30,"Push \xe9rtes\xedt\xe9sek"),e.qZA(),e.TgZ(31,"p",19),e._uU(32,"Enged\xe9ly ezen az eszk\xf6z\xf6n"),e.qZA(),e.TgZ(33,"div",20),e.YNc(34,de,1,0,"img",21),e.TgZ(35,"app-toggler",22),e.NdJ("click",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.togglePushNoti())}),e.qZA()()(),e.TgZ(36,"div",23)(37,"h3",18),e._uU(38,"Bejelentkezett eszk\xf6z\xf6k:"),e.qZA(),e.TgZ(39,"div",24),e.YNc(40,ge,1,1,"app-client-card",25),e.qZA()(),e.TgZ(41,"div",26)(42,"h3",27),e._uU(43,"Jelsz\xf3 m\xf3dos\xedt\xe1sa E-mail k\xe9r\xe9se"),e.qZA(),e.TgZ(44,"button",12),e.NdJ("click",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.savePassword())}),e._uU(45,"Jelsz\xf3 m\xf3dos\xedt\xe1sa"),e.qZA()(),e.TgZ(46,"div",28)(47,"h3",29),e._uU(48,"Felhaszn\xe1l\xf3 t\xf6rl\xe9se"),e.qZA(),e.TgZ(49,"button",30),e.NdJ("click",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.deleteAccount())}),e._uU(50,"Felhaszn\xe1l\xf3 t\xf6rl\xe9se"),e.qZA()()()()}if(2&i){const s=e.oxw();let t;e.xp6(5),e.Q6J("src",null!==(t=e.lcZ(6,22,e.lcZ(7,24,e.lcZ(8,26,s.$profile().img))))&&void 0!==t?t:"assets/svg/avatar.svg"),e.xp6(4),e.Q6J("label","Csapatn\xe9v:")("value",s.$profile().name),e.xp6(5),e.Q6J("ngIf",s.$profile().members.length<4),e.xp6(1),e.Q6J("label","Tag1:")("value",s.$profile().members[0]),e.xp6(1),e.Q6J("label","Tag2:")("value",s.$profile().members[1]),e.xp6(1),e.Q6J("label","Tag3:")("value",s.$profile().members[2]),e.xp6(1),e.Q6J("label","Tag4:")("value",s.$profile().members[3]),e.xp6(1),e.Q6J("disabled",(s.isSame||s.$saving())&&void 0===s.$newImgFile()),e.xp6(4),e.Q6J("ngIf",""!==s.$profile().nextEmail),e.xp6(1),e.Q6J("label","Email:")("value",s.$profile().email),e.xp6(1),e.Q6J("disabled",s.$saving()||s.isEmailSame),e.xp6(9),e.Q6J("ngIf","blocked"===s.$pushState()),e.xp6(1),e.Q6J("isOn","true"===s.$pushState()),e.xp6(5),e.Q6J("ngForOf",s.$profile().clients),e.xp6(4),e.Q6J("disabled",s.$saving()),e.xp6(5),e.Q6J("disabled",s.$deleting())}}let me=(()=>{var i;class o{constructor(t,n,a,c,_){this.userService=t,this.authService=n,this.pushService=a,this.confirmS=c,this.destroyRef=_,this.$profile=(0,e.tdS)({id:-1,name:"Ismeretlen",email:"",nextEmail:"",role:"ROLE_USER",members:[],clients:[]}),this.$saving=(0,e.tdS)(!1),this.$deleting=(0,e.tdS)(!1),this.$pushState=this.pushService.$state,this.$newImgFile=(0,e.tdS)(void 0),(0,e.cEC)(()=>{const w=this.authService.$currentTeamR();if(w){const x={...w};x.members=[...x.members],this.$profile.set(x)}},{allowSignalWrites:!0})}ngOnInit(){this.authService.authorizeMe().pipe((0,d.sL)(this.destroyRef)).subscribe()}addMember(){this.$profile().members.push("J\xe1t\xe9kos neve")}get isSame(){return JSON.stringify(this.$profile())===JSON.stringify(this.authService.$currentTeamR())}get isEmailSame(){return this.$profile().email===this.authService.$currentTeamR()?.email}saveProfile(){this.$saving.set(!0);const t=[];if(!this.isSame){const a={name:this.$profile().name,members:this.$profile().members};t.push(this.userService.updateProfile(a).pipe((0,d.sL)(this.destroyRef)))}const n=this.$newImgFile();n&&t.push(this.userService.updateImage(n).pipe((0,m.b)(()=>{this.$newImgFile.set(void 0)}),(0,d.sL)(this.destroyRef))),(0,re.D)(t).subscribe({complete:()=>this.$saving.set(!1),error:()=>this.$saving.set(!1)})}saveEmail(){this.$saving.set(!0),this.userService.updateEmail(this.$profile().email).pipe((0,d.sL)(this.destroyRef)).subscribe({complete:()=>this.$saving.set(!1)})}cancelEmailChange(){this.$saving.set(!0),this.userService.updateEmail(this.authService.$currentTeamR()?.email??"").pipe((0,d.sL)(this.destroyRef)).subscribe({complete:()=>this.$saving.set(!1)})}savePassword(){this.confirmS.confirm({question:"Biztosan m\xf3dos\xedtani szeretn\xe9d a jelszavad?",confirmText:"M\xf3dos\xedt\xe1s"},()=>{this.$saving.set(!0),this.userService.updatePasswordRequest().pipe((0,d.sL)(this.destroyRef)).subscribe({complete:()=>this.$saving.set(!1)})})}togglePushNoti(){"true"===this.$pushState()?this.pushService.unsubscribeFromTopic().subscribe():("false"===this.$pushState()||"blocked"===this.$pushState())&&this.pushService.requestPushNoti()}fileChange(t){this.$newImgFile.set(t)}deleteAccount(){this.confirmS.confirm({question:"Biztosan t\xf6r\xf6lni szeretn\xe9d a fi\xf3kod?",confirmText:"Fi\xf3k t\xf6rl\xe9se!"},()=>{this.$deleting.set(!0),this.userService.deleteAccountRequest().pipe((0,d.sL)(this.destroyRef)).subscribe({next:()=>this.$deleting.set(!1),error:()=>this.$deleting.set(!1)})})}}return(i=o).\u0275fac=function(t){return new(t||i)(e.Y36(h.K),e.Y36(v.e),e.Y36(ce.K),e.Y36(Z.z),e.Y36(e.ktI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],standalone:!0,features:[e.jDz],decls:1,vars:1,consts:[["class","profile",4,"ngIf"],[1,"profile"],[1,"profile-inside"],[1,"profile-data"],[1,"infos"],[1,"img-container"],[3,"src","fileChanged"],["type","editable",3,"label","value","valueChange"],[1,"members"],[1,"title"],[1,"text-size-base"],["classes","hover:scale-110 active:opacity-70 transition","iconSrc","assets/svg/add.svg","type","icon",3,"click",4,"ngIf"],[1,"btn-simple","w-fit","self-center",3,"disabled","click"],[1,"profile-email"],["class","changing",4,"ngIf"],[1,"btn-simple-red","w-fit","self-center",3,"disabled","click"],[1,"right"],[1,"push"],[1,"text-size-lg","text-center","bold"],[1,"text-size-base","text-center","bold"],[1,"push-t"],["title","\xc9rtes\xedt\xe9sek Kikapcsolva az eszk\xf6z\xf6n","src","assets/svg/warning-yellow.svg","alt","Push blocked Warning",4,"ngIf"],[3,"isOn","click"],[1,"profile-loggedin"],[1,"profile-clients"],[3,"client",4,"ngFor","ngForOf"],[1,"password-card"],[1,"text-size-lg","bold","text-center"],[1,"delete-card"],[1,"text-size-lg","bold"],[1,"btn-simple-red",3,"disabled","click"],["classes","hover:scale-110 active:opacity-70 transition","iconSrc","assets/svg/add.svg","type","icon",3,"click"],[1,"changing"],["title","V\xe1ltoztat\xe1s visszavon\xe1sa",3,"disabled","click"],["src","assets/svg/cancel.svg","alt","Cancel"],[1,"txt-warning-red"],["title","\xc9rtes\xedt\xe9sek Kikapcsolva az eszk\xf6z\xf6n","src","assets/svg/warning-yellow.svg","alt","Push blocked Warning"],[3,"client"]],template:function(t,n){1&t&&e.YNc(0,ue,51,28,"section",0),2&t&&e.Q6J("ngIf",void 0!==n.$profile())},dependencies:[l.ez,l.sg,l.O5,l.Ov,g.UX,ee.t,te.O,oe,ae,A.m,T.G,S.$,M.f],styles:["[_nghost-%COMP%]{height:100%}.password-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:16px;width:min(350px,100%);border-radius:8px;gap:14px;box-shadow:3px 3px 5px 2px #00000061}.delete-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:16px;background:black;width:min(350px,100%);border-radius:8px;gap:14px;box-shadow:3px 3px 5px 2px #00000061;color:#fff}.right[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:30px;align-items:center;width:-webkit-fill-available;border-radius:10px;background-color:#fff;padding:16px;height:-moz-fit-content;height:fit-content}@media (max-width: 800px){.right[_ngcontent-%COMP%]{max-width:400px}}.push[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:10px;background:white;border-radius:8px;gap:5px;box-shadow:3px 3px 5px 2px #00000061}.push[_ngcontent-%COMP%]   .push-t[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:10px}.push[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;width:30px;aspect-ratio:1}.profile-loggedin[_ngcontent-%COMP%]{width:100%}.profile-loggedin[_ngcontent-%COMP%]   .profile-clients[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,350px));gap:18px;justify-content:center;width:100%}.profile-email[_ngcontent-%COMP%]{border-radius:8px;width:100%;padding:1.5rem;background-color:#fff;display:flex;flex-direction:column;gap:14px}.profile-email[_ngcontent-%COMP%]   .changing[_ngcontent-%COMP%]{display:flex;justify-content:right;gap:5px;align-items:center}.profile-email[_ngcontent-%COMP%]   .changing[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:12px;aspect-ratio:1;object-fit:contain}.profile-email[_ngcontent-%COMP%]   .txt-warning-red[_ngcontent-%COMP%]{color:red;text-align:right;font-size:12px}.profile[_ngcontent-%COMP%]{padding:1rem;display:flex;flex-direction:row;gap:2rem;justify-content:center;margin-left:80px}@media (max-width: 800px){.profile[_ngcontent-%COMP%]{margin-left:0;flex-direction:column;gap:1rem;align-items:center}}.profile[_ngcontent-%COMP%]   .profile-inside[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;align-items:center;width:100%;max-width:400px}.profile-data[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse;align-items:center;gap:20px;width:100%;background-color:#fff;padding:1.5rem;border-radius:8px}.profile-data[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:300px;gap:20px}.profile-data[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]{position:relative;border-radius:100%;aspect-ratio:1;overflow:hidden}.profile-data[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]   .members[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;gap:5px}.profile-data[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]   .members[_ngcontent-%COMP%]   app-text-input[_ngcontent-%COMP%]{margin-left:10px}.profile-data[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]   .members[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:max-content;align-items:center;gap:10px}.profile-data[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]   .members[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   app-buttons[_ngcontent-%COMP%]{height:30px;width:30px}"],changeDetection:0}),o})();var u=r(92),he=r(424);let fe=(()=>{var i;class o{}return(i=o).\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-password-change-user"]],standalone:!0,features:[e.jDz],decls:4,vars:0,consts:[[1,"text-size-lg","text-center"]],template:function(t,n){1&t&&(e.TgZ(0,"section")(1,"h1",0),e._uU(2,"Jelsz\xf3 m\xf3dos\xedt\xe1sa"),e.qZA(),e._UZ(3,"app-password-change"),e.qZA())},dependencies:[l.ez,he.g],styles:["section[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;height:80%;gap:50px}"],changeDetection:0}),o})();var _e=r(6466);const Ce=[{path:u.x.user.home.path,component:F},{path:u.x.user.active.path,component:W},{path:u.x.user.profile.path,component:me},{path:u.x.user.password.path,component:fe},{path:u.x.user.delete.path,component:(()=>{var i;class o{constructor(t,n,a,c,_,w,x){this.userS=t,this.authS=n,this.destroyRef=a,this.notiS=c,this.confirmS=_,this.route=w,this.router=x,this.token=""}ngOnInit(){this.route.params.subscribe(t=>{this.token=t.token,this.confirmS.confirm({question:"Biztos t\xf6r\xf6lni szeretn\xe9d a fi\xf3kod?",confirmText:"Fi\xf3k t\xf6rl\xe9se!"},()=>{this.userS.deleteAccount(this.token).pipe((0,d.sL)(this.destroyRef)).subscribe({next:()=>{this.notiS.success("Fi\xf3k sikeresen t\xf6r\xf6lve"),this.authS.removeToken(),this.authS.logout()}})},()=>{this.router.navigateByUrl(u.x.user.call)})})}}return(i=o).\u0275fac=function(t){return new(t||i)(e.Y36(h.K),e.Y36(v.e),e.Y36(e.ktI),e.Y36(_e.g),e.Y36(Z.z),e.Y36(C.gz),e.Y36(C.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],standalone:!0,features:[e.jDz],decls:3,vars:0,consts:[[1,"text-size-lg","text-center"]],template:function(t,n){1&t&&(e.TgZ(0,"section")(1,"h1",0),e._uU(2,"Fi\xf3k t\xf6rl\xe9se"),e.qZA()())},dependencies:[l.ez],changeDetection:0}),o})()},{path:"**",redirectTo:u.x.user.home.path}]}}]);