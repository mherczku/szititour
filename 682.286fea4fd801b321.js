"use strict";(self.webpackChunkszititour=self.webpackChunkszititour||[]).push([[682],{4682:(Ae,H,p)=>{p.r(H),p.d(H,{GamesModule:()=>D});var l=p(6895),e=p(8256),K=p(2340),V=p(529);class d{constructor(t){this.http=t,this.baseUrl=K.N.apiBaseUrl}getAllGames(){return this.http.get(`${this.baseUrl}/games`)}createGame(t,i){const s=isNaN(Date.parse(t.dateStart.valueOf().toString()))?t.dateStart.valueOf():Date.parse(t.dateStart.valueOf().toString()),a=isNaN(Date.parse(t.dateEnd.valueOf().toString()))?t.dateEnd.valueOf():Date.parse(t.dateEnd.valueOf().toString()),o=new FormData;return o.append("gameStart",s.toString()),o.append("gameEnd",a.toString()),o.append("gameTitle",t.title),i&&o.append("image",i),this.http.post(`${this.baseUrl}/games/image`,o)}updateGame(t,i){const s=isNaN(Date.parse(t.dateStart.valueOf().toString()))?t.dateStart.valueOf():Date.parse(t.dateStart.valueOf().toString()),a=isNaN(Date.parse(t.dateEnd.valueOf().toString()))?t.dateEnd.valueOf():Date.parse(t.dateEnd.valueOf().toString()),o=new FormData;return o.append("gameStart",s.toString()),o.append("gameEnd",a.toString()),o.append("gameTitle",t.title),o.append("gameId",t.id.toString()),o.append("currentImage",t.img??""),i&&o.append("image",i),this.http.put(`${this.baseUrl}/games`,o)}deleteGame(t){return this.http.delete(`${this.baseUrl}/games/${t}`)}reviewApplication(t,i){return this.http.put(`${this.baseUrl}/applications/`,{id:t.id,accepted:i,game:{id:t.gameId},team:{id:t.teamId}})}getPlaceById(t){return this.http.get(`${this.baseUrl}/places/${t}`)}addPlaceToGame(t,i){const s=new FormData;return s.append("name",t.name),s.append("address",t.address),s.append("gameId",t.gameId.toString()),i&&s.append("image",i),this.http.post(`${this.baseUrl}/places/`,s)}updatePlace(t,i){const s=new FormData;return s.append("name",t.name),s.append("address",t.address),s.append("placeId",t.id.toString()),s.append("currentImage",t.img??""),i&&s.append("image",i),this.http.put(`${this.baseUrl}/places/`,s)}deletePlace(t){return this.http.delete(`${this.baseUrl}/places/${t}`)}createQuestion(t,i){const s=new FormData;return s.append("name",t.name),s.append("type",t.type.toString()),s.append("riddle",t.riddle?"true":"false"),s.append("placeId",t.placeId.toString()),i&&s.append("image",i),this.http.post(`${this.baseUrl}/questions/`,s)}updateQuestion(t,i){const s=new FormData;return s.append("name",t.name),s.append("currentImage",t.img??""),s.append("type",t.type.toString()),s.append("riddle",t.riddle?"true":"false"),s.append("questionId",t.id.toString()),i&&s.append("image",i),this.http.put(`${this.baseUrl}/questions/`,s)}deleteQuestion(t){return this.http.delete(`${this.baseUrl}/questions/${t}`)}changeGameActivation(t,i){return this.http.put(i?`${this.baseUrl}/games/activate/${t}`:`${this.baseUrl}/games/deactivate/${t}`,null)}}d.\u0275fac=function(t){return new(t||d)(e.LFG(V.eN))},d.\u0275prov=e.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"});var U=p(1864),R=p(1135),X=p(9646);class _{constructor(t){this.viewContainerRef=t}}function W(n,t){}_.\u0275fac=function(t){return new(t||_)(e.Y36(e.s_b))},_.\u0275dir=e.lG2({type:_,selectors:[["","host",""]]});class A{constructor(t){this.cdr=t,this.display$=(0,X.of)({component:void 0,visible:!1}),this.display_={visible:!1}}setCloseCallback(t){this.closeCallback=t}setDisplay(t){console.log({ds:t}),this.display$=t,this.display$.subscribe(i=>{this.display_=i,this.cdr.detectChanges(),i.visible&&this.open(i.component)})}open(t){if(void 0!==t){const i=this.host.viewContainerRef;i.clear(),i.createComponent(t)}}close(){this.closeCallback?.(),this.host.viewContainerRef.clear()}}A.\u0275fac=function(t){return new(t||A)(e.Y36(e.sBO))},A.\u0275cmp=e.Xpm({type:A,selectors:[["app-modal2"]],viewQuery:function(t,i){if(1&t&&e.Gf(_,7),2&t){let s;e.iGM(s=e.CRH())&&(i.host=s.first)}},decls:3,vars:1,consts:[["id","ngx-modal-host-container",1,"host-container",3,"ngClass","click"],[1,"content-container",3,"click"],["host",""]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return i.close()}),e.TgZ(1,"div",1),e.NdJ("click",function(a){return a.stopPropagation()}),e.YNc(2,W,0,0,"ng-template",2),e.qZA()()),2&t&&e.Q6J("ngClass",i.display_.visible?"":"hidden-host")},dependencies:[l.mk,_],styles:[".host-container[_ngcontent-%COMP%]{background:rgba(0,0,0,.31);width:100vw;height:100vh;position:absolute;top:0;z-index:1000;display:flex;justify-content:center;align-items:center}.content-container[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;max-width:80%;width:-moz-fit-content;width:fit-content;background:whitesmoke;margin:1rem;border:1px solid black;border-radius:5px;z-index:1001}.hidden-host[_ngcontent-%COMP%]{visibility:hidden}"]});class h{constructor(t,i,s){this.componentFactoryResolver=t,this.appRef=i,this.injector=s,this.display=new R.X({visible:!1});const a=this.componentFactoryResolver.resolveComponentFactory(A).create(this.injector);this.appRef.attachView(a.hostView),a.instance.setCloseCallback(()=>{this.close()}),a.instance.setDisplay(this.watch()),document.body.appendChild(a.hostView.rootNodes[0])}watch(){return this.display.asObservable()}getExtra(){return this.display.getValue().extra}open(t,i){this.display.next({visible:!0,component:t,extra:i})}close(){this.display.next({visible:!1})}}h.\u0275fac=function(t){return new(t||h)(e.LFG(e._Vd),e.LFG(e.z2F),e.LFG(e.zs3))},h.\u0275prov=e.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"});var c=p(433);function ee(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"div",3),e.NdJ("mouseenter",function(){e.CHM(i);const a=e.oxw();return e.KtG(a.mouseOver=!0)})("mouseleave",function(){e.CHM(i);const a=e.oxw();return e.KtG(a.mouseOver=!1)}),e._UZ(1,"img",4),e.TgZ(2,"p",5),e._uU(3),e.qZA()()}if(2&n){const i=e.oxw();e.Gre("",i.classes,"  py-3  relative w-full flex cursor-pointer items-center flex-row justify-center gap-4"),e.xp6(1),e.Q6J("ngClass",i.mouseOver?"anim-shake":"")("src",i.iconSrc,e.LSH),e.xp6(1),e.Q6J("ngClass",""),e.xp6(1),e.Oqu(i.text)}}function te(n,t){if(1&n&&(e.TgZ(0,"div",6),e._UZ(1,"img",7)(2,"img",8),e.qZA()),2&n){const i=e.oxw();e.Gre("",i.classes," h-[30px] w-[30px] relative z-10 items-center flex text-size-base deleteButton"),e.Q6J("ngClass",i.isDisabledBlocked?"opacity-60 cursor-not-allowed":i.isDisabledProgress?"opacity-60 cursor-progress":"cursor-pointer")}}function ie(n,t){if(1&n&&(e.TgZ(0,"div",6),e._UZ(1,"img",9),e.qZA()),2&n){const i=e.oxw();e.Gre("",i.classes," h-full items-center flex text-size-base"),e.Q6J("ngClass",i.isDisabledBlocked?"opacity-60 cursor-not-allowed":i.isDisabledProgress?"opacity-60 cursor-progress":"cursor-pointer"),e.xp6(1),e.Q6J("src",i.iconSrc,e.LSH)}}class u{constructor(){this.text="Click here",this.textHover="Click here hovered",this.classes="",this.type="icon",this.iconSrc="",this.isDisabledProgress=!1,this.isDisabledBlocked=!1,this.onClicked=new e.vpe,this.mouseOver=!1}onClick(){!this.isDisabledBlocked&&!this.isDisabledProgress&&this.onClicked.emit()}}function ne(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"div")(1,"label",2),e._uU(2),e.qZA(),e.TgZ(3,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(i);const o=e.oxw();return e.KtG(o.valueChange.emit(a))}),e.qZA()()}if(2&n){const i=e.oxw();e.Gre("relative flex flex-col gap-2 ",i.classes,""),e.xp6(2),e.Oqu(i.label),e.xp6(1),e.Q6J("ngModel",i.value)("type",i.inputType)("placeholder",i.placeholder)}}function se(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"input",3),e.NdJ("ngModelChange",function(a){e.CHM(i);const o=e.oxw(2);return e.KtG(o.valueChange.emit(a))}),e.qZA()}if(2&n){const i=e.oxw(2);e.Q6J("ngModel",i.value)("type",i.inputType)("placeholder",i.placeholder)}}function ae(n,t){if(1&n&&(e.TgZ(0,"p",8),e._uU(1),e.qZA()),2&n){const i=e.oxw(2);e.xp6(1),e.Oqu(i.value)}}function oe(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"app-buttons",9),e.NdJ("onClicked",function(){e.CHM(i);const a=e.oxw(2);return e.KtG(a.editing=!a.editing)}),e.qZA()}}function le(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"app-buttons",10),e.NdJ("onClicked",function(){e.CHM(i);const a=e.oxw(2);return e.KtG(a.editing=!a.editing)}),e.qZA()}}function pe(n,t){if(1&n&&(e.TgZ(0,"div")(1,"label",2),e._uU(2),e.qZA(),e.YNc(3,se,1,3,"input",4),e.YNc(4,ae,2,1,"p",5),e.YNc(5,oe,1,0,"app-buttons",6),e.YNc(6,le,1,0,"app-buttons",7),e.qZA()),2&n){const i=e.oxw();e.Gre("relative place-items-center flex gap-3 ",i.classes,""),e.xp6(2),e.Oqu(i.label),e.xp6(1),e.Q6J("ngIf",i.editing),e.xp6(1),e.Q6J("ngIf",!i.editing),e.xp6(1),e.Q6J("ngIf",!i.editing),e.xp6(1),e.Q6J("ngIf",i.editing)}}u.\u0275fac=function(t){return new(t||u)},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-buttons"]],inputs:{text:"text",textHover:"textHover",classes:"classes",type:"type",iconSrc:"iconSrc",isDisabledProgress:"isDisabledProgress",isDisabledBlocked:"isDisabledBlocked"},outputs:{onClicked:"onClicked"},decls:4,vars:4,consts:[[3,"ngSwitch","click"],[3,"class","mouseenter","mouseleave",4,"ngSwitchCase"],[3,"class","ngClass",4,"ngSwitchCase"],[3,"mouseenter","mouseleave"],["alt","Button Icon",1,"w-[15%]",3,"ngClass","src"],[1,"text-size-min","italic",3,"ngClass"],[3,"ngClass"],["src","assets/svg/delete-red.svg","alt","Delete Icon",1,"absolute","hover","bottom-0","left-0"],["src","assets/svg/delete.svg","alt","Delete Icon",1,"absolute","noHover","bottom-0","left-0"],["alt","Icon",1,"h-full","aspect-square",3,"src"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return i.onClick()}),e.YNc(1,ee,4,7,"div",1),e.YNc(2,te,3,4,"div",2),e.YNc(3,ie,2,5,"div",2),e.qZA()),2&t&&(e.Q6J("ngSwitch",i.type),e.xp6(1),e.Q6J("ngSwitchCase","blueIcon"),e.xp6(1),e.Q6J("ngSwitchCase","delete"),e.xp6(1),e.Q6J("ngSwitchCase","icon"))},dependencies:[l.mk,l.RF,l.n9],styles:["*[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.deleteButton[_ngcontent-%COMP%]:hover   .hover[_ngcontent-%COMP%]{visibility:visible}.deleteButton[_ngcontent-%COMP%]   .hover[_ngcontent-%COMP%], .deleteButton[_ngcontent-%COMP%]:hover   .noHover[_ngcontent-%COMP%]{visibility:hidden}.deleteButton[_ngcontent-%COMP%]   .noHover[_ngcontent-%COMP%]{visibility:visible}.shadowButton[_ngcontent-%COMP%]:hover{box-shadow:0 12px 16px #0000003d,0 17px 50px #00000030}.anim-shake[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_shake;animation-duration:.5s;animation-iteration-count:1}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translateZ(0)}50%{transform:translate3d(0,-5px,0)}}"]});class v{constructor(){this.placeholder="Ide \xedrhatsz",this.label="Label:",this.classes="",this.password=!1,this.type="label",this.value="",this.valueChange=new e.vpe,this.inputType="text",this.editing=!1}ngOnInit(){this.password&&(this.inputType="password")}}v.\u0275fac=function(t){return new(t||v)},v.\u0275cmp=e.Xpm({type:v,selectors:[["app-text-input"]],inputs:{placeholder:"placeholder",label:"label",classes:"classes",password:"password",type:"type",value:"value"},outputs:{valueChange:"valueChange"},decls:3,vars:3,consts:[[3,"ngSwitch"],[3,"class",4,"ngSwitchCase"],[1,"text-size-base"],[1,"neumorphism-2","border-1","focus:border-green-500","hover:border-green-500","bg-transparent","text-size-base","outline-0","w-full",3,"ngModel","type","placeholder","ngModelChange"],["class","neumorphism-2 border-1 focus:border-green-500 hover:border-green-500 bg-transparent text-size-base outline-0 w-full",3,"ngModel","type","placeholder","ngModelChange",4,"ngIf"],["class","text-size-base w-full",4,"ngIf"],["classes","min-w-[20px]","iconSrc","assets/svg/edit.svg","type","icon",3,"onClicked",4,"ngIf"],["classes","min-w-[30px]","iconSrc","assets/svg/tick.svg","type","icon",3,"onClicked",4,"ngIf"],[1,"text-size-base","w-full"],["classes","min-w-[20px]","iconSrc","assets/svg/edit.svg","type","icon",3,"onClicked"],["classes","min-w-[30px]","iconSrc","assets/svg/tick.svg","type","icon",3,"onClicked"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,ne,4,7,"div",1),e.YNc(2,pe,7,8,"div",1),e.qZA()),2&t&&(e.Q6J("ngSwitch",i.type),e.xp6(1),e.Q6J("ngSwitchCase","label"),e.xp6(1),e.Q6J("ngSwitchCase","editable"))},dependencies:[l.O5,l.RF,l.n9,c.Fj,c.JJ,c.On,u]});class J{constructor(){this.name="Label",this.date=new Date,this.classes="",this.dateChange=new e.vpe}changed(t){this.date=t,this.dateChange.emit(this.date)}}J.\u0275fac=function(t){return new(t||J)},J.\u0275cmp=e.Xpm({type:J,selectors:[["app-date-input"]],inputs:{name:"name",date:"date",classes:"classes"},outputs:{dateChange:"dateChange"},decls:5,vars:8,consts:[["for","dateInput",1,"text-size-base"],["id","dateInput","type","datetime-local",1,"text-size-base",3,"ngModel","ngModelChange"]],template:function(t,i){1&t&&(e.TgZ(0,"div")(1,"label",0),e._uU(2),e.qZA(),e.TgZ(3,"input",1),e.NdJ("ngModelChange",function(a){return i.changed(a)}),e.ALo(4,"date"),e.qZA()()),2&t&&(e.Gre("flex justify-between w-full gap-1 mobile:flex-col ",i.classes,""),e.xp6(2),e.hij("",i.name,": "),e.xp6(1),e.Q6J("ngModel",e.xi3(4,5,i.date,"yyyy-MM-ddTHH:mm")))},dependencies:[c.Fj,c.JJ,c.On,l.uU]});const ce=["fileInput"];class b{setGame(t){this.game=t.game,this.isEdit=t.isEdit}constructor(t,i,s){this.adminService=t,this.alert=i,this.modalS=s,this.isEdit=!0,this.game={applications:[],id:0,img:"",places:[],title:"alma",dateStart:new Date,dateEnd:new Date,active:!1},this.onClose=new e.vpe,this.saving=!1;const a=this.modalS.getExtra();void 0!==a&&this.setGame(a)}ngOnChanges(t){this.fileInput?.nativeElement?.value&&(this.fileInput.nativeElement.value=null)}close(){this.resetFields(),this.onClose.emit(),this.modalS.close()}resetFields(){this.game={applications:[],id:0,img:"",places:[],title:"",dateStart:new Date,dateEnd:new Date,active:!1},this.file=void 0,this.fileInput?.nativeElement?.value&&(this.fileInput.nativeElement.value=null)}ngOnDestroy(){this.subscriptionSave?.unsubscribe()}save(){const t=isNaN(Date.parse(this.game.dateStart.valueOf().toString()))?this.game.dateStart.valueOf():Date.parse(this.game.dateStart.valueOf().toString()),i=isNaN(Date.parse(this.game.dateEnd.valueOf().toString()))?this.game.dateEnd.valueOf():Date.parse(this.game.dateEnd.valueOf().toString());console.log(i,">",t,i>t),i>t?""!==this.game.title?(this.saving=!0,this.subscriptionSave=this.isEdit?this.adminService.updateGame(this.game,this.file).subscribe({next:s=>{s&&(this.alert.success(`${s.title} sikeresen friss\xedtve`),this.saving=!1,this.close())},error:s=>{this.saving=!1}}):this.adminService.createGame(this.game,this.file).subscribe({next:s=>{s&&(this.alert.success(`${s.title} sikeresen l\xe9trehozva`),this.saving=!1,this.close())},error:s=>{this.saving=!1}})):this.alert.warning("A j\xe1t\xe9knak kell egy n\xe9v"):this.alert.warning("A j\xe1t\xe9k v\xe9ge nem lehet a kezdete el\u0151tt")}setFile(t){this.file=t.target.files[0]}}b.\u0275fac=function(t){return new(t||b)(e.Y36(d),e.Y36(U.jE),e.Y36(h))},b.\u0275cmp=e.Xpm({type:b,selectors:[["app-edit-game"]],viewQuery:function(t,i){if(1&t&&e.Gf(ce,5),2&t){let s;e.iGM(s=e.CRH())&&(i.fileInput=s.first)}},inputs:{isEdit:"isEdit",game:"game"},outputs:{onClose:"onClose"},features:[e.TTD],decls:17,vars:6,consts:[[1,"relative","bg-white","p-5","rounded","overflow-y-auto","max-h-[80vh]","flex-col","flex"],[1,"text-size-h3","text-center","w-full","font-bold","mb-6"],["classes","mb-4","label","Neve",3,"value","valueChange"],["name","Kezd\u0151 id\u0151pont","classes","mb-4",3,"date","dateChange"],["name","Befejez\u0151 id\u0151pont","classes","mb-4",3,"date","dateChange"],[1,"flex","gap-2","mb-5","items-center"],[1,"text-size-base"],[1,"input_container"],["type","file","accept","image/png, image/jpeg",1,"simpleFileInput","text-size-min",3,"change"],["fileInput",""],[1,"w-full","flex","justify-between"],[1,"btn-hover-bold",3,"click"],[1,"btn-simple",3,"disabled","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"p",1),e._uU(2),e.qZA(),e.TgZ(3,"app-text-input",2),e.NdJ("valueChange",function(a){return i.game.title=a}),e.qZA(),e.TgZ(4,"app-date-input",3),e.NdJ("dateChange",function(a){return i.game.dateStart=a}),e.qZA(),e.TgZ(5,"app-date-input",4),e.NdJ("dateChange",function(a){return i.game.dateEnd=a}),e.qZA(),e.TgZ(6,"div",5)(7,"label",6),e._uU(8,"K\xe9p:"),e.qZA(),e.TgZ(9,"div",7)(10,"input",8,9),e.NdJ("change",function(a){return i.setFile(a)}),e.qZA()()(),e.TgZ(12,"div",10)(13,"button",11),e.NdJ("click",function(){return i.close()}),e._uU(14,"Vissza"),e.qZA(),e.TgZ(15,"button",12),e.NdJ("click",function(){return i.save()}),e._uU(16),e.qZA()()()),2&t&&(e.xp6(2),e.Oqu(i.isEdit?"J\xe1t\xe9k szerkeszt\xe9se":"\xdaj j\xe1t\xe9k l\xe9trehoz\xe1sa"),e.xp6(1),e.Q6J("value",i.game.title),e.xp6(1),e.Q6J("date",i.game.dateStart),e.xp6(1),e.Q6J("date",i.game.dateEnd),e.xp6(10),e.Q6J("disabled",i.saving),e.xp6(1),e.Oqu(i.isEdit?"Ment\xe9s":"L\xe9trehoz\xe1s"))},dependencies:[v,J],changeDetection:0});var re=p(655),de=p(7579),Y=p(2722),ue=p(5192),m=p(1258),j=p(3105);function me(n,t){if(1&n&&(e.TgZ(0,"a",19),e._uU(1,"St\xe1tusz"),e.qZA()),2&n){const i=e.oxw();e.Q6J("routerLink","/admin/active/"+i.game.id)}}class C{constructor(t,i){this.alert=t,this.adminService=i,this.game={active:!1,applications:[],id:0,img:"assets/img/sample.jpg",places:[],title:"SampleTitle",dateStart:new Date,dateEnd:new Date},this.onEditClicked=new e.vpe,this.onTeamsClicked=new e.vpe,this.onPlacesClicked=new e.vpe,this.onDeleted=new e.vpe,this.deleting=!1,this.destroy$=new de.x}deleteGame(){window.confirm(`Biztos t\xf6rl\xf6d a ${this.game.title} j\xe1t\xe9kot?`)&&(this.deleting=!0,this.adminService.deleteGame(this.game.id).pipe((0,Y.R)(this.destroy$)).subscribe({next:i=>{this.deleting=!1,this.alert.success(`${this.game.title} sikeresen t\xf6r\xf6lve`),this.onDeleted.emit()},error:i=>{this.deleting=!1}}))}getAcceptedApplicationsLength(){}changeGameActivation(){this.adminService.changeGameActivation(this.game.id,!this.game.active).pipe((0,Y.R)(this.destroy$)).subscribe(t=>{this.game=t})}}C.\u0275fac=function(t){return new(t||C)(e.Y36(U.jE),e.Y36(d))},C.\u0275cmp=e.Xpm({type:C,selectors:[["app-gamecard"]],inputs:{game:"game"},outputs:{onEditClicked:"onEditClicked",onTeamsClicked:"onTeamsClicked",onPlacesClicked:"onPlacesClicked",onDeleted:"onDeleted"},decls:24,vars:17,consts:[[1,"relative","rounded","hover:scale-105","duration-300","shadow-2xl","h-full"],[1,"relative","flex","flex-col","h-full"],[1,"relative"],["alt","Game's image",1,"aspect-video","object-cover","w-full","rounded-t",3,"src"],[1,"switch",3,"click"],["disabled","","type","checkbox",3,"ngModel"],[1,"slider","round"],["class","activeLink text-size-base",3,"routerLink",4,"ngIf"],[1,"absolute","top-0","right-0","p-1","z-20"],["type","delete",1,"absolute","right-0","top-0","bg-white","rounded","p-1",3,"isDisabledProgress","onClicked"],[1,"p-3"],[1,"flex","flex-row","gap-3"],[1,"font-bold","text-size-base"],["classes","min-w-[20px]","iconSrc","assets/svg/edit.svg","type","icon",3,"click"],[1,"text-size-min"],[1,"flex-grow"],[1,"flex","flex-row","w-full","border-t-1"],["classes","border-r-1","iconSrc","assets/svg/map.svg","type","blueIcon",3,"text","click"],["iconSrc","assets/svg/team2.svg","type","blueIcon",3,"text","click"],[1,"activeLink","text-size-base",3,"routerLink"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.ALo(4,"imgSrc"),e.TgZ(5,"label",4),e.NdJ("click",function(){return i.changeGameActivation()}),e._UZ(6,"input",5)(7,"span",6),e.qZA(),e.YNc(8,me,2,1,"a",7),e.TgZ(9,"div",8)(10,"app-buttons",9),e.NdJ("onClicked",function(){return i.deleteGame()}),e.qZA()()(),e.TgZ(11,"div",10)(12,"div",11)(13,"p",12),e._uU(14),e.qZA(),e.TgZ(15,"app-buttons",13),e.NdJ("click",function(){return i.onEditClicked.emit()}),e.qZA()(),e.TgZ(16,"p",14),e._uU(17),e.ALo(18,"date"),e.ALo(19,"date"),e.qZA()(),e._UZ(20,"div",15),e.TgZ(21,"div",16)(22,"app-buttons",17),e.NdJ("click",function(){return i.onPlacesClicked.emit()}),e.qZA(),e.TgZ(23,"app-buttons",18),e.NdJ("click",function(){return i.onTeamsClicked.emit()}),e.qZA()()()()),2&t&&(e.xp6(3),e.s9C("src",e.lcZ(4,9,i.game.img),e.LSH),e.xp6(3),e.Q6J("ngModel",i.game.active),e.xp6(2),e.Q6J("ngIf",i.game.active),e.xp6(2),e.Q6J("isDisabledProgress",i.deleting),e.xp6(4),e.Oqu(i.game.title?i.game.title:"No title"),e.xp6(3),e.AsE("",e.xi3(18,11,i.game.dateStart,"short")," - ",e.xi3(19,14,i.game.dateEnd,"short"),""),e.xp6(5),e.MGl("text","",i.game.places.length," Helysz\xedn"),e.xp6(1),e.MGl("text","",i.game.applications.length," Csapat"))},dependencies:[l.O5,u,c.Wl,c.JJ,c.On,m.rH,l.uU,j.G],styles:['.gif[_ngcontent-%COMP%]{background-image:url(/src/assets/gif/map.gif)}.activeLink[_ngcontent-%COMP%]{position:absolute;top:30px;left:5px;display:inline-block;width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;cursor:pointer;color:#e80000}.switch[_ngcontent-%COMP%]{position:absolute;top:5px;left:5px;display:inline-block;width:50px;height:21px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#ccc;transition:.4s}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:15px;width:15px;left:4px;bottom:3px;background-color:#fff;transition:.4s}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#00b90b}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px #00b90b}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(26px)}.slider.round[_ngcontent-%COMP%]{border-radius:34px}.slider.round[_ngcontent-%COMP%]:before{border-radius:50%}.toggle-container[_ngcontent-%COMP%]{position:absolute;top:5px;left:5px}']}),(0,re.gn)([ue.n],C.prototype,"destroy$",void 0);const ge=["modalContent"];class x{constructor(){this.displayedClassName="",this.isDisplayed=!1,this.classes="",this.isDisplayedChange=new e.vpe}clickInside(t){this.modal.nativeElement.contains(t.target)||(this.isDisplayedChange.emit(!1),this.isDisplayed=!1)}}function fe(n,t){if(1&n&&(e.TgZ(0,"app-buttons",9),e.NdJ("click",function(s){return s.stopPropagation()}),e.qZA()),2&n){const i=e.oxw();e.hYB("routerLink","/admin/place/",i.place.gameId,"/",i.place.id,"")}}function _e(n,t){if(1&n&&(e.TgZ(0,"div",16)(1,"div",17)(2,"p",12),e._uU(3),e.qZA(),e.TgZ(4,"p",13),e._uU(5),e.qZA()()()),2&n){const i=t.$implicit,s=e.oxw(2);e.xp6(3),e.hij("K\xe9rd\xe9s ",s.place.questions.indexOf(i)+1,": "),e.xp6(2),e.hij("",i.name," ")}}function ve(n,t){if(1&n&&(e.TgZ(0,"div",10)(1,"div",11)(2,"p",12),e._uU(3,"Neve: "),e.qZA(),e.TgZ(4,"p",13),e._uU(5),e.qZA()(),e.TgZ(6,"div",11)(7,"p",12),e._uU(8,"C\xedme: "),e.qZA(),e.TgZ(9,"p",13),e._uU(10),e.qZA()(),e._UZ(11,"img",14),e.ALo(12,"imgSrc"),e.YNc(13,_e,6,2,"div",15),e.qZA()),2&n){const i=e.oxw();e.xp6(5),e.Oqu(i.place.name),e.xp6(5),e.Oqu(i.place.address),e.xp6(1),e.s9C("alt",i.place.name),e.Q6J("src",e.lcZ(12,5,i.place.img),e.LSH),e.xp6(2),e.Q6J("ngForOf",i.place.questions)}}x.\u0275fac=function(t){return new(t||x)},x.\u0275cmp=e.Xpm({type:x,selectors:[["app-modal"]],viewQuery:function(t,i){if(1&t&&e.Gf(ge,5),2&t){let s;e.iGM(s=e.CRH())&&(i.modal=s.first)}},hostBindings:function(t,i){1&t&&e.NdJ("click",function(a){return i.clickInside(a)})},inputs:{displayedClassName:"displayedClassName",isDisplayed:"isDisplayed",classes:"classes"},outputs:{isDisplayedChange:"isDisplayedChange"},ngContentSelectors:["*"],decls:4,vars:4,consts:[[1,"modal",3,"ngClass"],["modalContent",""]],template:function(t,i){1&t&&(e.F$t(),e.TgZ(0,"div",0)(1,"div",null,1),e.Hsn(3),e.qZA()()),2&t&&(e.Q6J("ngClass",i.isDisplayed?"flex":"hidden"),e.xp6(1),e.Gre("modal-content ",i.classes,""))},dependencies:[l.mk],styles:[".modal[_ngcontent-%COMP%]{position:fixed;z-index:1000;left:0;top:0;align-items:center;width:100%;height:100%;overflow:unset;background-color:#000;background-color:#0006}.modal-content[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;background-color:transparent;margin:auto;border-radius:10px;max-width:80%;max-height:80%}"]});class Q{constructor(){this.place={id:-1,name:"TestPlace",img:"",gameId:-1,address:"",latitude:0,longitude:0,questions:[]},this.open=!1}toggle(t){this.open=!this.open,t.stopPropagation()}}Q.\u0275fac=function(t){return new(t||Q)},Q.\u0275cmp=e.Xpm({type:Q,selectors:[["app-dropdown"]],inputs:{place:"place",number:"number"},decls:11,vars:9,consts:[[1,"p-5","mobile:px-3","w-full","hover:border-amber-600","rounded","border-1","border-transparent","shadow","mb-1",3,"click"],[1,"flex","w-full","justify-between","items-center"],[1,"flex","w-fit","max-w-full","gap-[10%]","items-center"],[1,"aspect-video","rounded","object-cover","mobile:hidden","h-[50px]","max-h-[50px]",3,"src","alt"],[1,"text-size-base","font-bold","whitespace-nowrap"],["classes","min-w-[18px]","iconSrc","assets/svg/edit.svg","type","icon",3,"routerLink","click",4,"ngIf"],["src","assets/svg/anchor-down-black.svg","alt","Dropdown",1,"cursor-pointer","disableSelectAndTap",3,"ngClass"],[1,"transition-all",3,"ngClass","click"],["class","flex flex-col gap-4",4,"ngIf"],["classes","min-w-[18px]","iconSrc","assets/svg/edit.svg","type","icon",3,"routerLink","click"],[1,"flex","flex-col","gap-4"],[1,"flex","gap-2","mobile:flex-col"],[1,"text-size-base","font-bold"],[1,"text-size-base"],[1,"object-contain","max-h-[300px]","aspect-video",3,"src","alt"],["class","flex flex-col gap-3",4,"ngFor","ngForOf"],[1,"flex","flex-col","gap-3"],[1,"flex","gap-1","mobile:flex-col"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.NdJ("click",function(a){return i.toggle(a)}),e.TgZ(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.ALo(4,"imgSrc"),e.TgZ(5,"p",4),e._uU(6),e.qZA(),e.YNc(7,fe,1,2,"app-buttons",5),e.qZA(),e._UZ(8,"img",6),e.qZA(),e.TgZ(9,"div",7),e.NdJ("click",function(a){return a.stopPropagation()}),e.YNc(10,ve,14,7,"div",8),e.qZA()()),2&t&&(e.xp6(3),e.s9C("alt",i.place.name),e.Q6J("src",e.lcZ(4,7,i.place.img),e.LSH),e.xp6(3),e.hij("",i.number,". Helysz\xedn"),e.xp6(1),e.Q6J("ngIf",i.open),e.xp6(1),e.Q6J("ngClass",i.open?"rotate-180":""),e.xp6(1),e.Q6J("ngClass",i.open?"h-fit mt-5":"h-0"),e.xp6(1),e.Q6J("ngIf",i.open))},dependencies:[l.mk,l.sg,l.O5,u,m.rH,j.G]});const be=function(n,t){return[n,t]};function Ce(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"div",6)(1,"div",7),e._UZ(2,"img",8),e.TgZ(3,"p",9),e._uU(4),e.qZA()(),e.TgZ(5,"div",10)(6,"app-buttons",11),e.NdJ("onClicked",function(){const o=e.CHM(i).$implicit,r=e.oxw(2);return e.KtG(r.reviewApplication(o,!1))}),e.qZA(),e.TgZ(7,"app-buttons",12),e.NdJ("onClicked",function(){const o=e.CHM(i).$implicit,r=e.oxw(2);return e.KtG(r.reviewApplication(o,!0))}),e.qZA()()()}if(2&n){const i=t.$implicit,s=e.oxw(2);e.Q6J("ngClass",e.WLB(9,be,!0===i.accepted?"bg-green-200":"",!1===i.accepted?"bg-red-200":"")),e.xp6(2),e.s9C("alt",i.teamName),e.xp6(2),e.Oqu(i.teamName),e.xp6(2),e.Q6J("isDisabledProgress",s.reviewing)("isDisabledBlocked",!1===i.accepted)("ngClass",!1===i.accepted?"":"hover:opacity-80"),e.xp6(1),e.Q6J("isDisabledProgress",s.reviewing)("isDisabledBlocked",!0===i.accepted)("ngClass",!0===i.accepted?"":"hover:opacity-80")}}function xe(n,t){if(1&n&&(e.TgZ(0,"div",2)(1,"p",3),e._uU(2,"Csapatok"),e.qZA(),e.TgZ(3,"div",4),e.YNc(4,Ce,8,12,"div",5),e.qZA()()),2&n){const i=e.oxw();e.xp6(4),e.Q6J("ngForOf",i.applications)}}function we(n,t){if(1&n&&e._UZ(0,"app-dropdown",19),2&n){const i=t.$implicit;e.Q6J("number",t.index+1)("place",i)}}function ye(n,t){1&n&&(e.TgZ(0,"p",20),e._uU(1,"No places yet"),e.qZA())}function Te(n,t){if(1&n&&(e.TgZ(0,"div",13)(1,"p",3),e._uU(2,"Helysz\xednek"),e.qZA(),e.TgZ(3,"div",14),e.YNc(4,we,1,2,"app-dropdown",15),e.YNc(5,ye,2,0,"p",16),e.qZA(),e.TgZ(6,"div",17),e._UZ(7,"app-buttons",18),e.qZA()()),2&n){const i=e.oxw();e.xp6(4),e.Q6J("ngForOf",i.places),e.xp6(1),e.Q6J("ngIf",0===i.places.length),e.xp6(2),e.MGl("routerLink","/admin/place/",i.gameIdForPlacesList,"/new")}}class I{constructor(t){this.adminService=t,this.type="applications",this.applications=[],this.places=[],this.gameIdForPlacesList=0,this.applicationsChange=new e.vpe,this.reviewing=!1}reviewApplication(t,i){this.reviewing=!0,this.subscriptionReview=this.adminService.reviewApplication(t,i).subscribe({next:s=>{const a=this.applications.findIndex(o=>o.id==s.id);this.applications[a]=s,this.reviewing=!1},error:s=>{this.reviewing=!1}})}ngOnDestroy(){this.subscriptionReview?.unsubscribe()}}function Ee(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"app-gamecard",8),e.NdJ("onDeleted",function(){e.CHM(i);const a=e.oxw();return e.KtG(a.getGames())})("onEditClicked",function(){const o=e.CHM(i).$implicit,r=e.oxw();return e.KtG(r.editGame(o))})("onPlacesClicked",function(){const o=e.CHM(i).$implicit,r=e.oxw();return e.KtG(r.changeModal(r.PLACES,o))})("onTeamsClicked",function(){const o=e.CHM(i).$implicit,r=e.oxw();return e.KtG(r.changeModal(r.TEAMS,o))}),e.qZA()}2&n&&e.Q6J("game",t.$implicit)}I.\u0275fac=function(t){return new(t||I)(e.Y36(d))},I.\u0275cmp=e.Xpm({type:I,selectors:[["app-lists"]],inputs:{type:"type",applications:"applications",places:"places",gameIdForPlacesList:"gameIdForPlacesList"},outputs:{applicationsChange:"applicationsChange"},decls:2,vars:2,consts:[["class","flex flex-col gap-3 relative bg-white p-5 rounded shadow w-full max-h-[80vh]",4,"ngIf"],["class","flex flex-col gap-3 relative bg-white p-5 h-[80vh] h-full rounded shadow w-full",4,"ngIf"],[1,"flex","flex-col","gap-3","relative","bg-white","p-5","rounded","shadow","w-full","max-h-[80vh]"],[1,"text-size-lg","text-center","w-full","font-bold","mb-6"],[1,"overflow-y-auto","h-fit"],["class","flex justify-between mobile:flex-col gap-10 p-5 pr-10 hover:border-amber-600 rounded border-1 border-transparent shadow items-center",3,"ngClass",4,"ngFor","ngForOf"],[1,"flex","justify-between","mobile:flex-col","gap-10","p-5","pr-10","hover:border-amber-600","rounded","border-1","border-transparent","shadow","items-center",3,"ngClass"],[1,"flex","w-fit","gap-[10%]","items-center"],["src","assets/img/team-placeholder.jpg",1,"max-w-[50px]","aspect-square","rounded-[100%]","object-cover","max-h-[50px]",3,"alt"],[1,"text-size-base","font-bold","whitespace-nowrap"],[1,"flex","h-full","w-fit","gap-[10%]","items-center"],["classes","w-[3rem]","type","icon","iconSrc","assets/svg/remove.svg",3,"isDisabledProgress","isDisabledBlocked","ngClass","onClicked"],["classes","w-[3rem]","type","icon","iconSrc","assets/svg/accept.svg",3,"isDisabledProgress","isDisabledBlocked","ngClass","onClicked"],[1,"flex","flex-col","gap-3","relative","bg-white","p-5","h-[80vh]","h-full","rounded","shadow","w-full"],[1,"h-fit","overflow-y-auto"],[3,"number","place",4,"ngFor","ngForOf"],["class","text-size-base bold text-center",4,"ngIf"],[1,"absolute","z-10","w-[3rem]","h-[3rem]","text-size-base","right-10","bottom-10"],["classes","hover:scale-110 active:opacity-70 transition","type","icon","iconSrc","assets/svg/add.svg",3,"routerLink"],[3,"number","place"],[1,"text-size-base","bold","text-center"]],template:function(t,i){1&t&&(e.YNc(0,xe,5,1,"div",0),e.YNc(1,Te,8,3,"div",1)),2&t&&(e.Q6J("ngIf","applications"===i.type),e.xp6(1),e.Q6J("ngIf","places"===i.type))},dependencies:[l.mk,l.sg,l.O5,u,Q,m.rH],styles:["[_nghost-%COMP%]{width:100%}"]});class P{constructor(t,i){this.adminService=t,this.modalService=i,this.games=[],this.EDIT="EDIT",this.TEAMS="TEAMS",this.PLACES="PLACES",this.editModalVisible=!1,this.teamsModalVisible=!1,this.placesModalVisible=!1,this.selectedGame={applications:[],id:0,places:[],active:!1,title:"",dateStart:new Date,dateEnd:new Date},this.isGameEditing=!1}ngOnInit(){this.getGames()}getGames(){this.subscriptionGetGames=this.adminService.getAllGames().subscribe(t=>{this.games=t})}editGame(t){this.modalService.open(b,{game:t,isEdit:!0})}openNewGameDialog(){const t={applications:[],id:0,places:[],title:"",dateStart:new Date,dateEnd:new Date};this.modalService.open(b,{game:t,isEdit:!1})}closeEditModal(){this.editModalVisible=!1,this.getGames()}changeModal(t,i){switch(this.selectedGame={...i},this.editModalVisible=!1,this.teamsModalVisible=!1,this.placesModalVisible=!1,t){case this.EDIT:this.editModalVisible=!0;break;case this.TEAMS:this.teamsModalVisible=!0;break;case this.PLACES:this.placesModalVisible=!0}}ngOnDestroy(){this.subscriptionGetGames?.unsubscribe()}}P.\u0275fac=function(t){return new(t||P)(e.Y36(d),e.Y36(h))},P.\u0275cmp=e.Xpm({type:P,selectors:[["app-games"]],decls:9,vars:6,consts:[[1,"relative","p-10","flex","flex-col","flex-grow","bg-smoke","box-border","mobile:p-5"],[1,"grid","grid-cols-4","tablet:grid-cols-2","gap-6","mobile:grid-cols-1","relative"],[1,"fixed","z-10","w-[3rem]","h-[3rem]","text-size-base","right-20","bottom-20","mobile:right-10","mobile:bottom-10"],["type","icon","classes","hover:scale-110 active:opacity-70 transition","iconSrc","assets/svg/add.svg",3,"onClicked"],[3,"game","onDeleted","onEditClicked","onPlacesClicked","onTeamsClicked",4,"ngFor","ngForOf"],["classes","w-full",3,"isDisplayed","isDisplayedChange"],[3,"applications","applicationsChange"],["type","places",3,"gameIdForPlacesList","places"],[3,"game","onDeleted","onEditClicked","onPlacesClicked","onTeamsClicked"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-buttons",3),e.NdJ("onClicked",function(){return i.openNewGameDialog()}),e.qZA()(),e.YNc(4,Ee,1,1,"app-gamecard",4),e.qZA()(),e.TgZ(5,"app-modal",5),e.NdJ("isDisplayedChange",function(a){return i.teamsModalVisible=a}),e.TgZ(6,"app-lists",6),e.NdJ("applicationsChange",function(a){return i.selectedGame.applications=a}),e.qZA()(),e.TgZ(7,"app-modal",5),e.NdJ("isDisplayedChange",function(a){return i.placesModalVisible=a}),e._UZ(8,"app-lists",7),e.qZA()),2&t&&(e.xp6(4),e.Q6J("ngForOf",i.games),e.xp6(1),e.Q6J("isDisplayed",i.teamsModalVisible),e.xp6(1),e.Q6J("applications",i.selectedGame.applications),e.xp6(1),e.Q6J("isDisplayed",i.placesModalVisible),e.xp6(1),e.Q6J("gameIdForPlacesList",i.selectedGame.id)("places",i.selectedGame.places))},dependencies:[l.sg,C,x,u,I],styles:["[_nghost-%COMP%]{display:flex;flex-grow:1}"]});var g=p(3910),L=p(4057);class w{}w.\u0275fac=function(t){return new(t||w)},w.\u0275mod=e.oAB({type:w}),w.\u0275inj=e.cJS({imports:[l.ez,g.F,L.m,c.u5]});class f{}f.\u0275fac=function(t){return new(t||f)},f.\u0275mod=e.oAB({type:f}),f.\u0275inj=e.cJS({imports:[l.ez]});var B=p(5105);class y{}y.\u0275fac=function(t){return new(t||y)},y.\u0275mod=e.oAB({type:y}),y.\u0275inj=e.cJS({imports:[l.ez,g.F,m.Bz,L.m]});class T{}T.\u0275fac=function(t){return new(t||T)},T.\u0275mod=e.oAB({type:T}),T.\u0275inj=e.cJS({imports:[l.ez,g.F,y,m.Bz]});class E{}E.\u0275fac=function(t){return new(t||E)},E.\u0275mod=e.oAB({type:E}),E.\u0275inj=e.cJS({imports:[l.ez,c.u5]});class Z{}Z.\u0275fac=function(t){return new(t||Z)},Z.\u0275mod=e.oAB({type:Z}),Z.\u0275inj=e.cJS({imports:[l.ez,B.N,g.F,c.u5,E]});var $=p(2505);class G{transform(t){switch(t){case"shortText":return"R\xf6vid sz\xf6veg";case"longText":return"Hossz\xfa sz\xf6veg";case"number":return"Sz\xe1m";case"imgOnly":return"K\xe9p";case"year":return"\xc9vsz\xe1m";default:return""}}}function Ze(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"app-buttons",8),e.NdJ("click",function(a){e.CHM(i);const o=e.oxw();return a.stopPropagation(),e.KtG(o.openEditDialog())}),e.qZA()}}function ke(n,t){if(1&n&&(e.TgZ(0,"div",9)(1,"div",10)(2,"p",11),e._uU(3,"K\xe9rd\xe9s:"),e.qZA(),e.TgZ(4,"p",12),e._uU(5),e.qZA()(),e.TgZ(6,"div",10)(7,"p",11),e._uU(8,"Rejtv\xe9ny:"),e.qZA(),e.TgZ(9,"p",12),e._uU(10),e.qZA()(),e.TgZ(11,"div",10)(12,"p",11),e._uU(13,"T\xedpusa:"),e.qZA(),e.TgZ(14,"p",12),e._uU(15),e.ALo(16,"questionType"),e.qZA()(),e._UZ(17,"img",13),e.ALo(18,"imgSrc"),e.qZA()),2&n){const i=e.oxw();e.xp6(5),e.Oqu(i.question.name),e.xp6(5),e.Oqu(i.question.riddle?"igen":"nem"),e.xp6(5),e.Oqu(e.lcZ(16,4,i.question.type)),e.xp6(2),e.Q6J("src",e.lcZ(18,6,i.question.img),e.LSH)}}G.\u0275fac=function(t){return new(t||G)},G.\u0275pipe=e.Yjl({name:"questionType",type:G,pure:!0});class O{constructor(){this.onEditPressed=new e.vpe,this.open=!1}toggle(t){this.open=!this.open,t.stopPropagation()}openEditDialog(){this.onEditPressed.emit()}}O.\u0275fac=function(t){return new(t||O)},O.\u0275cmp=e.Xpm({type:O,selectors:[["app-question"]],inputs:{question:"question",number:"number"},outputs:{onEditPressed:"onEditPressed"},decls:9,vars:5,consts:[[1,"p-5","mobile:px-3","w-full","hover:border-amber-600","rounded","border-1","border-transparent","shadow","mb-1",3,"click"],[1,"flex","w-full","justify-between","items-center"],[1,"flex","w-fit","max-w-full","gap-[10%]","items-center"],[1,"text-size-base","font-bold","whitespace-nowrap"],["classes","min-w-[18px]","iconSrc","assets/svg/edit.svg","type","icon",3,"click",4,"ngIf"],["src","assets/svg/anchor-down-black.svg","alt","Dropdown",1,"cursor-pointer",3,"ngClass"],[1,"transition-all",3,"ngClass","click"],["class","flex flex-col gap-4",4,"ngIf"],["classes","min-w-[18px]","iconSrc","assets/svg/edit.svg","type","icon",3,"click"],[1,"flex","flex-col","gap-4"],[1,"flex","gap-2","mobile:flex-col"],[1,"text-size-base","font-bold"],[1,"text-size-base"],["alt","",1,"object-contain","max-h-[300px]","aspect-video",3,"src"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.NdJ("click",function(a){return i.toggle(a)}),e.TgZ(1,"div",1)(2,"div",2)(3,"p",3),e._uU(4),e.qZA(),e.YNc(5,Ze,1,0,"app-buttons",4),e.qZA(),e._UZ(6,"img",5),e.qZA(),e.TgZ(7,"div",6),e.NdJ("click",function(a){return a.stopPropagation()}),e.YNc(8,ke,19,8,"div",7),e.qZA()()),2&t&&(e.xp6(4),e.hij("",i.number,". K\xe9rd\xe9s"),e.xp6(1),e.Q6J("ngIf",i.open),e.xp6(1),e.Q6J("ngClass",i.open?"rotate-180":""),e.xp6(1),e.Q6J("ngClass",i.open?"h-fit mt-5":"h-0"),e.xp6(1),e.Q6J("ngIf",i.open))},dependencies:[l.mk,l.O5,u,j.G,G]});const qe=["fileInput"];class N{constructor(t,i){this.adminService=t,this.alert=i,this.isEdit=!1,this.question={id:0,img:"",name:"",type:$.c.shortText,placeId:1,riddle:!1},this.onExit=new e.vpe,this.saving=!1,this.deleting=!1}ngOnChanges(t){this.fileInput?.nativeElement.value&&(this.fileInput.nativeElement.value=null)}save(){this.isEdit?(console.log(this.question.riddle,"saving"),this.saving=!0,this.subscriptionSave=this.adminService.updateQuestion(this.question,this.file).subscribe({next:t=>{this.alert.success("K\xe9rd\xe9s sikeresen friss\xedtve"),this.saving=!1,this.fileInput?.nativeElement.value&&(this.fileInput.nativeElement.value=null),this.onExit.emit({action:"update",question:t})},error:t=>{this.saving=!1}})):(this.saving=!0,this.subscriptionSave=this.adminService.createQuestion(this.question,this.file).subscribe({next:t=>{this.alert.success("K\xe9rd\xe9s sikeresen l\xe9trehozva"),this.saving=!1,this.fileInput?.nativeElement.value&&(this.fileInput.nativeElement.value=null),this.onExit.emit({action:"create",question:t})},error:t=>{this.saving=!1}}))}delete(){window.confirm("Biztos t\xf6rl\xf6d ezt a k\xe9rd\xe9st?")&&(this.deleting=!0,this.subscriptionDelete=this.adminService.deleteQuestion(this.question.id).subscribe({next:i=>{this.alert.success("K\xe9rd\xe9s sikeresen t\xf6r\xf6lve"),this.deleting=!1,this.onExit.emit({action:"delete",question:this.question})},error:i=>{this.deleting=!1}}))}ngOnDestroy(){this.subscriptionSave?.unsubscribe(),this.subscriptionDelete?.unsubscribe()}setFile(t){this.file=t.target.files[0]}}N.\u0275fac=function(t){return new(t||N)(e.Y36(d),e.Y36(U.jE))},N.\u0275cmp=e.Xpm({type:N,selectors:[["app-question-edit"]],viewQuery:function(t,i){if(1&t&&e.Gf(qe,5),2&t){let s;e.iGM(s=e.CRH())&&(i.fileInput=s.first)}},inputs:{isEdit:"isEdit",question:"question"},outputs:{onExit:"onExit"},features:[e.TTD],decls:35,vars:7,consts:[[1,"relative","bg-white","p-5","rounded","overflow-y-auto","max-h-[80vh]","flex-col","gap-2","flex"],[1,"text-size-h3","text-center","w-full","font-bold","mb-6"],[1,"text-size-base"],["type","text",1,"simpleInput",3,"ngModel","ngModelChange"],[1,"flex","gap-2"],["type","checkbox",3,"checked","change"],[3,"ngModel","ngModelChange"],["value","shortText"],["value","longText"],["value","number"],["value","imgOnly"],["value","year"],[1,"input_container"],["type","file","accept","image/png, image/jpeg",1,"simpleFileInput","text-size-min",3,"change"],["fileInput",""],[1,"w-full","flex","justify-between"],[1,"btn-simple-red",3,"disabled","click"],[3,"disabled","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"p",1),e._uU(2),e.qZA(),e.TgZ(3,"label",2),e._uU(4,"K\xe9rd\xe9s:"),e.qZA(),e.TgZ(5,"input",3),e.NdJ("ngModelChange",function(a){return i.question.name=a}),e.qZA(),e.TgZ(6,"div",4)(7,"label",2),e._uU(8,"Rejtv\xe9ny?:"),e.qZA(),e.TgZ(9,"input",5),e.NdJ("change",function(){return i.question.riddle=!i.question.riddle}),e.qZA()(),e.TgZ(10,"div",4)(11,"label",2),e._uU(12,"K\xe9rd\xe9s t\xedpusa:"),e.qZA(),e.TgZ(13,"select",6),e.NdJ("ngModelChange",function(a){return i.question.type=a}),e.TgZ(14,"option",7),e._uU(15,"R\xf6vid sz\xf6veg"),e.qZA(),e.TgZ(16,"option",8),e._uU(17,"Hossz\xfa sz\xf6veg"),e.qZA(),e.TgZ(18,"option",9),e._uU(19,"Sz\xe1m"),e.qZA(),e.TgZ(20,"option",10),e._uU(21,"K\xe9p"),e.qZA(),e.TgZ(22,"option",11),e._uU(23,"\xc9vsz\xe1m"),e.qZA()()(),e.TgZ(24,"div",4)(25,"label",2),e._uU(26,"K\xe9p:"),e.qZA(),e.TgZ(27,"div",12)(28,"input",13,14),e.NdJ("change",function(a){return i.setFile(a)}),e.qZA()()(),e.TgZ(30,"div",15)(31,"button",16),e.NdJ("click",function(){return i.delete()}),e._uU(32,"T\xf6rl\xe9s"),e.qZA(),e.TgZ(33,"button",17),e.NdJ("click",function(){return i.save()}),e._uU(34),e.qZA()()()),2&t&&(e.xp6(2),e.Oqu(i.isEdit?"K\xe9rd\xe9s szerkeszt\xe9se":"K\xe9rd\xe9s l\xe9trehoz\xe1sa"),e.xp6(3),e.Q6J("ngModel",i.question.name),e.xp6(4),e.Q6J("checked",i.question.riddle),e.xp6(4),e.Q6J("ngModel",i.question.type),e.xp6(18),e.Q6J("disabled",!i.isEdit||i.deleting),e.xp6(2),e.Q6J("disabled",i.saving),e.xp6(1),e.Oqu(i.isEdit?"Ment\xe9s":"L\xe9trehoz\xe1s"))},dependencies:[c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.On]});const Me=["fileInput"];function Se(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"app-question",22),e.NdJ("onEditPressed",function(){const o=e.CHM(i).$implicit,r=e.oxw();return e.KtG(r.openEditQuestionDialog(o))}),e.qZA()}if(2&n){const s=t.index;e.Q6J("question",t.$implicit)("number",s+1)}}class z{constructor(t,i,s){this.adminService=t,this.alert=i,this.router=s,this.isEdit=!1,this.placeChange=new e.vpe,this.editModalVisible=!1,this.isEditQuestion=!1,this.saving=!1,this.deleting=!1}ngOnInit(){this.resetQuestion()}resetQuestion(){this.selectedQuestion={id:0,name:"",placeId:this.place.id,img:"",type:$.c.shortText,riddle:!1}}setFile(t){this.file=t.target.files[0]}savePlace(){this.isEdit?(this.saving=!0,this.subscriptionSave=this.adminService.updatePlace(this.place,this.file).subscribe({next:t=>{this.alert.success(`${t.name} helysz\xedn sikeresen friss\xedtve`),this.saving=!1,this.place=t,this.fileInput?.nativeElement.value&&(this.fileInput.nativeElement.value=null)},error:t=>{this.saving=!1}})):(this.saving=!0,this.subscriptionSave=this.adminService.addPlaceToGame(this.place,this.file).subscribe({next:t=>{this.alert.success(`${t.name} helysz\xedn sikeresen l\xe9trehozva`),this.saving=!1,this.router.navigateByUrl(`/admin-place/${t.gameId}/${t.id}`)},error:t=>{this.saving=!1}}))}deletePlace(){window.confirm(`Biztos t\xf6rl\xf6d a ${this.place.name} helysz\xednt?`)&&(this.deleting=!0,this.subscriptionDelete=this.adminService.deletePlace(this.place.id).subscribe({next:i=>{this.alert.success(`${this.place.name} helysz\xedn sikeresen t\xf6r\xf6lve`),this.deleting=!1,this.router.navigateByUrl("/admin")},error:i=>{this.deleting=!1}}))}openNewQuestionDialog(){this.resetQuestion(),this.isEditQuestion=!1,this.editModalVisible=!0}openEditQuestionDialog(t){this.selectedQuestion={...t},console.log("editing: ",this.selectedQuestion),this.isEditQuestion=!0,this.editModalVisible=!0}editQuestionDialogExited(t){switch(console.log("edited: ",t.question),this.editModalVisible=!1,console.log(t),t.action){case"create":this.place.questions.push(t.question);break;case"delete":const i=this.place.questions.find(a=>a.id===t.question.id);if(i){const a=this.place.questions.indexOf(i);a>-1&&this.place.questions.splice(a,1)}break;case"update":const s=this.place.questions.find(a=>a.id===t.question.id);if(s){const a=this.place.questions.indexOf(s);a>-1&&this.place.questions.splice(a,1),this.place.questions.push(t.question)}}}ngOnDestroy(){this.subscriptionSave?.unsubscribe(),this.subscriptionDelete?.unsubscribe()}}z.\u0275fac=function(t){return new(t||z)(e.Y36(d),e.Y36(U.jE),e.Y36(m.F0))},z.\u0275cmp=e.Xpm({type:z,selectors:[["app-edit-place"]],viewQuery:function(t,i){if(1&t&&e.Gf(Me,5),2&t){let s;e.iGM(s=e.CRH())&&(i.fileInput=s.first)}},inputs:{isEdit:"isEdit",place:"place"},outputs:{placeChange:"placeChange"},decls:29,vars:15,consts:[[1,"w-full","bg-white","shadow-2xl","rounded","flex","flex-col","p-5","gap-2"],[1,"flex","w-full","mobile:flex-col","justify-between","gap-2"],[1,"w-[45%]","flex","flex-col","p-5","mobile:w-full"],[1,"text-size-lg","mb-5","bold"],["classes","w-fit mb-5","type","editable",3,"value","label","valueChange"],[1,"flex","flex-col","gap-2","mb-5","w-full"],[1,"text-size-base"],[1,"input_container"],["type","file","accept","image/png, image/jpeg",1,"simpleFileInput","text-size-min",3,"change"],["fileInput",""],[1,"flex-grow"],["alt","place image",1,"aspect-video","border-1","max-h-[30vh]","object-contain",3,"src"],[1,"w-[45%]","p-5","max-h-[75vh]","mobile:w-full","rounded","border-kon-blue","mobile:border-transparent","border-1","overflow-y-auto"],[1,"flex","gap-2","mb-2","items-center"],[1,"text-size-lg","bold"],["classes","aspect-square w-[30px] hover:scale-110 active:opacity-70 transition","type","icon","iconSrc","assets/svg/add.svg",3,"isDisabledBlocked","onClicked"],[3,"question","number","onEditPressed",4,"ngFor","ngForOf"],[1,"flex","justify-between","w-full"],[1,"btn-simple-red",3,"disabled","click"],[1,"btn-simple",3,"disabled","click"],[3,"isDisplayed","isDisplayedChange"],[3,"isEdit","question","onExit"],[3,"question","number","onEditPressed"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p",3),e._uU(4,"Helysz\xedn inform\xe1ci\xf3k:"),e.qZA(),e.TgZ(5,"app-text-input",4),e.NdJ("valueChange",function(a){return i.place.name=a}),e.qZA(),e.TgZ(6,"app-text-input",4),e.NdJ("valueChange",function(a){return i.place.address=a}),e.qZA(),e.TgZ(7,"div",5)(8,"label",6),e._uU(9,"K\xe9p:"),e.qZA(),e.TgZ(10,"div",7)(11,"input",8,9),e.NdJ("change",function(a){return i.setFile(a)}),e.qZA()()(),e.TgZ(13,"div",10),e._UZ(14,"img",11),e.ALo(15,"imgSrc"),e.qZA()(),e.TgZ(16,"div",12)(17,"div",13)(18,"p",14),e._uU(19,"K\xe9rd\xe9sek:"),e.qZA(),e.TgZ(20,"app-buttons",15),e.NdJ("onClicked",function(){return i.openNewQuestionDialog()}),e.qZA()(),e.YNc(21,Se,1,2,"app-question",16),e.qZA()(),e.TgZ(22,"div",17)(23,"button",18),e.NdJ("click",function(){return i.deletePlace()}),e._uU(24,"T\xf6rl\xe9s"),e.qZA(),e.TgZ(25,"button",19),e.NdJ("click",function(){return i.savePlace()}),e._uU(26),e.qZA()(),e.TgZ(27,"app-modal",20),e.NdJ("isDisplayedChange",function(a){return i.editModalVisible=a}),e.TgZ(28,"app-question-edit",21),e.NdJ("onExit",function(a){return i.editQuestionDialogExited(a)}),e.qZA()()()),2&t&&(e.xp6(5),e.Q6J("value",i.place.name)("label","Neve:"),e.xp6(1),e.Q6J("value",i.place.address)("label","C\xedme:"),e.xp6(8),e.Q6J("src",e.lcZ(15,13,i.place.img),e.LSH),e.xp6(6),e.Q6J("isDisabledBlocked",!i.isEdit),e.xp6(1),e.Q6J("ngForOf",i.place.questions),e.xp6(2),e.Q6J("disabled",!i.isEdit||i.deleting),e.xp6(2),e.Q6J("disabled",i.saving),e.xp6(1),e.Oqu(i.isEdit?"Ment\xe9s":"L\xe9trehoz\xe1s"),e.xp6(1),e.Q6J("isDisplayed",i.editModalVisible),e.xp6(1),e.Q6J("isEdit",i.isEditQuestion)("question",i.selectedQuestion))},dependencies:[l.sg,v,u,O,x,N,j.G]});class F{constructor(t,i){this.route=t,this.adminService=i,this.place={id:0,name:"Helysz\xedn neve",img:"",gameId:0,address:"Helysz\xedn c\xedme",latitude:0,longitude:0,questions:[]},this.placeId=0,this.isEdit=!0}ngOnInit(){this.route.params.subscribe(t=>{const i=t.placeId,s=t.gameId;"new"===i?(this.isEdit=!1,this.placeId=0,this.place={id:0,name:"Helysz\xedn neve",img:"",gameId:s,address:"Helysz\xedn c\xedme",latitude:0,longitude:0,questions:[]}):(this.placeId=i,this.isEdit=!0,this.getPlace())})}getPlace(){this.subscriptionGet=this.adminService.getPlaceById(this.placeId).subscribe({next:t=>{this.place=t},error:t=>{}})}ngOnDestroy(){this.subscriptionGet?.unsubscribe()}}F.\u0275fac=function(t){return new(t||F)(e.Y36(m.gz),e.Y36(d))},F.\u0275cmp=e.Xpm({type:F,selectors:[["app-place"]],decls:2,vars:2,consts:[[1,"h-full","w-full","p-5","flex","justify-center","bg-smoke"],[1,"w-full",3,"place","isEdit","placeChange"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"app-edit-place",1),e.NdJ("placeChange",function(a){return i.place=a}),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("place",i.place)("isEdit",i.isEdit))},dependencies:[z],styles:["[_nghost-%COMP%]{display:flex;flex-grow:1}"]});class k{}k.\u0275fac=function(t){return new(t||k)},k.\u0275mod=e.oAB({type:k}),k.\u0275inj=e.cJS({imports:[l.ez]});class q{}q.\u0275fac=function(t){return new(t||q)},q.\u0275mod=e.oAB({type:q}),q.\u0275inj=e.cJS({imports:[l.ez,g.F,L.m,k]});class M{}M.\u0275fac=function(t){return new(t||M)},M.\u0275mod=e.oAB({type:M}),M.\u0275inj=e.cJS({imports:[l.ez,B.N,g.F,c.u5]});class S{}S.\u0275fac=function(t){return new(t||S)},S.\u0275mod=e.oAB({type:S}),S.\u0275inj=e.cJS({imports:[l.ez,B.N,g.F,q,f,M,L.m]});const De=[{path:"",component:P},{path:"place/:gameId/:placeId",component:F}];class D{}D.\u0275fac=function(t){return new(t||D)},D.\u0275mod=e.oAB({type:D}),D.\u0275inj=e.cJS({imports:[l.ez,m.Bz.forChild(De),w,f,B.N,g.F,T,Z,S]})}}]);