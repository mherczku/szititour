"use strict";(self.webpackChunkszititour=self.webpackChunkszititour||[]).push([[137],{3137:(ye,O,r)=>{r.r(O),r.d(O,{USER_ROUTES:()=>Pe});var c=r(6814),T=r(7582),S=r(8645),_=r(9773),Z=r(8520),k=r(1788),w=r(5442),e=r(9468),F=r(553),d=r(9397),$=r(9862),x=r(5624);let C=(()=>{var s;class o{constructor(n,i){this.http=n,this.authService=i,this.baseUrl=F.N.apiBaseUrl+"/user"}getGames(){return this.http.get(`${this.baseUrl}/games`)}applyForGame(n){return this.http.post(`${this.baseUrl}/apply`,n)}cancelApplicationForGame(n){return this.http.post(`${this.baseUrl}/cancel`,n)}updateProfile(n){return this.http.post(`${this.baseUrl}/update`,n).pipe((0,d.b)(i=>{this.authService.dispatchLogin(i)}))}updatePassword(n){return this.http.post(`${this.baseUrl}/update/password`,n).pipe((0,d.b)(i=>{this.authService.dispatchLogin(i)}))}updateEmail(n){return this.http.post(`${this.baseUrl}/update/email`,n).pipe((0,d.b)(i=>{this.authService.dispatchLogin(i)}))}revokeToken(n){return this.http.post(`${this.baseUrl}/revoke`,n).pipe((0,d.b)(i=>{this.authService.dispatchLogin(i)}))}updateImage(n){const i=new FormData;return i.append("image",n),this.http.post(`${this.baseUrl}/update/image`,i).pipe((0,d.b)(a=>{this.authService.dispatchLogin(a)}))}deleteAccount(n){return this.http.delete(this.baseUrl,{body:{password:n}}).pipe((0,d.b)(()=>{this.authService.dispatchLogout()}))}}return(s=o).\u0275fac=function(n){return new(n||s)(e.LFG($.eN),e.LFG(x.e))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),o})();var u,M=r(9890);const E=function(s,o){return{"btn-simple-red":s,"btn-simple-green":o}};class P{constructor(o,t){this.cd=o,this.userService=t,this.game={applications:[],dateEnd:new Date,dateStart:new Date,id:0,places:[],title:"Test Title",active:!1},this.destroy$=new S.x}applyBtnClicked(){this.game.active||("applied"===this.game.userApplied||"accepted"===this.game.userApplied?this.cancelApplicationForGame():"none"===this.game.userApplied&&this.applyForGame())}applyForGame(){this.userService.applyForGame(this.game.id).pipe((0,_.R)(this.destroy$)).subscribe({next:o=>{console.log(o),this.game=o,this.cd.markForCheck()},error:o=>{console.error(o)}})}cancelApplicationForGame(){this.userService.cancelApplicationForGame(this.game.id).pipe((0,_.R)(this.destroy$)).subscribe({next:o=>{console.log(o),this.game=o,this.cd.markForCheck()},error:o=>{console.error(o)}})}}function G(s,o){1&s&&e._UZ(0,"app-user-game-card",4),2&s&&e.Q6J("game",o.$implicit)}(u=P).\u0275fac=function(o){return new(o||u)(e.Y36(e.sBO),e.Y36(C))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-user-game-card"]],inputs:{game:"game"},standalone:!0,features:[e.jDz],decls:12,vars:20,consts:[[1,"card-game"],[3,"src","alt"],[1,"details"],[1,"text-size-lg","bold"],[1,"text-size-base"],[1,"btn-simple",3,"routerLink","disabled","ngClass","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e._UZ(1,"img",1),e.ALo(2,"imgSrc"),e.TgZ(3,"div",2)(4,"p",3),e._uU(5),e.qZA(),e.TgZ(6,"p",4),e._uU(7),e.ALo(8,"date"),e.ALo(9,"date"),e.qZA(),e.TgZ(10,"button",5),e.NdJ("click",function(){return t.applyBtnClicked()}),e._uU(11),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("src",e.lcZ(2,9,t.game.img),e.LSH)("alt",t.game.title),e.xp6(4),e.Oqu(t.game.title),e.xp6(2),e.AsE("",e.xi3(8,11,t.game.dateStart,"y. MM. d. H:mm")," - ",e.xi3(9,14,t.game.dateEnd,"H:mm"),""),e.xp6(3),e.Q6J("routerLink",t.game.active&&"accepted"===t.game.userApplied?"/user/active/"+t.game.id:void 0)("disabled","declined"===t.game.userApplied)("ngClass",e.WLB(17,E,"applied"===t.game.userApplied||"accepted"===t.game.userApplied&&!t.game.active,t.game.active&&"accepted"===t.game.userApplied)),e.xp6(1),e.Oqu("applied"===t.game.userApplied||"accepted"===t.game.userApplied?t.game.active&&"accepted"===t.game.userApplied?"\xcdr\xe1ny a j\xe1t\xe9k":"Visszamond\xe1s":"Jelentkez\xe9s"))},dependencies:[c.ez,c.mk,c.uU,k.rH,w.m,M.G],styles:[".card-game[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:400px;margin:auto;gap:10px;border-radius:6px;background:#ffffff;box-shadow:20px 20px 60px #d9d9d9,-20px -20px 60px #fff}.card-game[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;aspect-ratio:16/9}.card-game[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{flex-grow:1;padding:1rem}.card-game[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:20px;width:100%}[_nghost-%COMP%]{height:100%;width:100%}"],changeDetection:0}),(0,T.gn)([Z.n],P.prototype,"destroy$",void 0);let Q=(()=>{var s;class o{constructor(n,i){this.authService=n,this.userService=i,this.$profile=this.authService.$currentTeamR}ngOnInit(){this.games=this.userService.getGames()}}return(s=o).\u0275fac=function(n){return new(n||s)(e.Y36(x.e),e.Y36(C))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-home"]],standalone:!0,features:[e.jDz],decls:6,vars:4,consts:[[1,"welcome"],[1,"text-size-h3"],[1,"grid-games"],[3,"game",4,"ngFor","ngForOf"],[3,"game"]],template:function(n,i){if(1&n&&(e.TgZ(0,"div",0)(1,"p",1),e._uU(2),e.qZA()(),e.TgZ(3,"section",2),e.YNc(4,G,1,1,"app-user-game-card",3),e.ALo(5,"async"),e.qZA()),2&n){let a;e.xp6(2),e.hij("\xdcdv \xfajra itt ",null==(a=i.$profile())?null:a.name," csapat"),e.xp6(2),e.Q6J("ngForOf",e.lcZ(5,2,i.games))}},dependencies:[c.ez,c.sg,c.Ov,P],styles:[".grid-games[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:1.5rem}@media (max-width: 1050px){.grid-games[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (max-width: 600px){.grid-games[_ngcontent-%COMP%]{grid-template-columns:repeat(1,minmax(0,1fr))}}.center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.grid-games[_ngcontent-%COMP%]{padding:0 1rem;place-items:center}.welcome[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:2rem;text-align:center}"],changeDetection:0}),o})();var z=r(4547),l=r(762),p=r(6223),I=r(8180),m=r(9393),v=r(198);let J=(()=>{var s;class o{constructor(n,i){this.http=n,this.store=i,this.baseUrl=F.N.apiBaseUrl+"/user",this.changedAnswers=new Map}addAnswer(n,i){this.changedAnswers.set(n,i)}getActiveGameData(n){return this.http.get(`${this.baseUrl}/activegame/${n}`).pipe((0,d.b)(i=>{this.store.dispatch((0,m.u)({gameState:i.teamGameStatusDto}))}))}getTeamGameStatus(n){return this.http.get(`${this.baseUrl}/status/${n}`).pipe((0,d.b)(i=>{this.store.dispatch((0,m.u)({gameState:i}))}))}loadTeamGameStatus(n){return this.http.get(`${this.baseUrl}/status/${n}`).pipe((0,d.b)(i=>{this.store.dispatch((0,m.u)({gameState:i}))})).pipe((0,I.q)(1)).subscribe()}answerQuestions(n,i){return this.http.post(`${this.baseUrl}/answers`,{gameId:n,questionAnswers:i}).pipe((0,d.b)(f=>{this.store.dispatch((0,m.u)({gameState:f}))}))}answerQuestionWithImage(n,i){const a=new FormData;return a.append("image",i),this.http.post(`${this.baseUrl}/answer/${n}/image`,a)}}return(s=o).\u0275fac=function(n){return new(n||s)(e.LFG($.eN),e.LFG(v.yh))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),o})();const U=["questionFileInput"];function N(s,o){if(1&s&&(e._UZ(0,"img",9),e.ALo(1,"imgSrc")),2&s){const t=e.oxw();e.Q6J("src",e.lcZ(1,1,t._question.img),e.LSH)}}function D(s,o){if(1&s&&(e._UZ(0,"img",13),e.ALo(1,"imgSrc")),2&s){const t=e.oxw(2);let n;e.Q6J("src",null!==(n=t.currentImg)&&void 0!==n?n:e.lcZ(1,1,null==t._savedAnswer?null:t._savedAnswer.img),e.LSH)}}function Y(s,o){if(1&s){const t=e.EpF();e.ynx(0),e.TgZ(1,"input",10,11),e.NdJ("change",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.inputFileChanged(i))}),e.qZA(),e.YNc(3,D,2,3,"img",12),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",t.currentImg||(null==t._savedAnswer?null:t._savedAnswer.img))}}function L(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"input",14),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.changed(i))}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("ngModel",t.currentAnswer)}}function j(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"input",14),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.changed(i))}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("ngModel",t.currentAnswer)}}function R(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"input",15),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.changed(i))}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("ngModel",t.currentAnswer)}}function H(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"input",15),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.changed(i))}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("ngModel",t.currentAnswer)}}const K=function(s){return{differentAnswer:s}};let B=(()=>{var s;class o{set question(n){this._question=n,this.setCurrentAnswerData()}set teamStatus(n){this._teamStatus=n,this.setCurrentAnswerData()}constructor(n){this.activeGameService=n,this.QuestionType=l.c,this.currentAnswer="",this.answerIsSame=!1}setCurrentAnswerData(){if(this._question&&this._teamStatus){switch(this._savedAnswer=this._teamStatus?.placeStatuses?.find(n=>n.placeId===this._question.placeId)?.qanswers?.find(n=>n.questionDtoNoAnswers.id===this._question.id),this._question.type){case l.c.shortText:case l.c.longText:this.currentAnswer=this._savedAnswer?.answerText??"";break;case l.c.number:this.currentAnswer=this._savedAnswer?.answerNumber??"";break;case l.c.imgOnly:this.fileInputRef?.nativeElement&&(this.fileInputRef.nativeElement.value=null),this.currentImg=void 0;break;case l.c.year:this.currentAnswer=this._savedAnswer?.answerNumber??""}this.setIsAnswerSameAsStatus()}}setIsAnswerSameAsStatus(){switch(this._question.type){case l.c.shortText:case l.c.longText:this.answerIsSame=this.currentAnswer===this._savedAnswer?.answerText;break;case l.c.number:this.answerIsSame=this.currentAnswer===this._savedAnswer?.answerNumber;break;case l.c.imgOnly:this.answerIsSame=!this.currentImg;break;case l.c.year:this.answerIsSame=this.currentAnswer===this._savedAnswer?.answerNumber}}changed(n){if(this.currentAnswer=n,this.setIsAnswerSameAsStatus(),!this.answerIsSame)switch(this._question.type){case l.c.shortText:case l.c.longText:this.activeGameService.addAnswer(this._question.id,{answerText:n});break;case l.c.number:this.activeGameService.addAnswer(this._question.id,{answerNumber:n});break;case l.c.imgOnly:return;case l.c.year:this.activeGameService.addAnswer(this._question.id,{answerNumber:n})}}inputFileChanged(n){if(n.target.files[0]){const i=new FileReader;i.onload=()=>{this.currentImg=i.result,this.setIsAnswerSameAsStatus()},i.readAsDataURL(n.target.files[0]),this.activeGameService.addAnswer(this._question.id,{imgFile:n.target.files[0]})}}}return(s=o).\u0275fac=function(n){return new(n||s)(e.Y36(J))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-question-card"]],viewQuery:function(n,i){if(1&n&&e.Gf(U,5),2&n){let a;e.iGM(a=e.CRH())&&(i.fileInputRef=a.first)}},inputs:{index:"index",question:"question",teamStatus:"teamStatus"},standalone:!0,features:[e.jDz],decls:13,vars:13,consts:[[1,"holder-question"],[1,"text-size-base","bold","question-title"],[1,"question-body",3,"ngClass"],[1,"text-size-base"],["class","object-contain max-h-[300px] aspect-video",3,"src",4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],["placeholder","V\xe1lasz","type","text",3,"ngModel","ngModelChange",4,"ngSwitchCase"],["placeholder","0","type","number",3,"ngModel","ngModelChange",4,"ngSwitchCase"],[1,"object-contain","max-h-[300px]","aspect-video",3,"src"],["type","file",3,"change"],["questionFileInput",""],["id","questionImageAnswer","class","object-contain max-h-[300px] aspect-video","alt","",3,"src",4,"ngIf"],["id","questionImageAnswer","alt","",1,"object-contain","max-h-[300px]","aspect-video",3,"src"],["placeholder","V\xe1lasz","type","text",3,"ngModel","ngModelChange"],["placeholder","0","type","number",3,"ngModel","ngModelChange"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"p",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"p",3),e._uU(5),e.qZA(),e.YNc(6,N,2,3,"img",4),e.ynx(7,5),e.YNc(8,Y,4,1,"ng-container",6),e.YNc(9,L,1,1,"input",7),e.YNc(10,j,1,1,"input",7),e.YNc(11,R,1,1,"input",8),e.YNc(12,H,1,1,"input",8),e.BQk(),e.qZA()()),2&n&&(e.xp6(2),e.AsE("",i._question.riddle?"Rejtv\xe9ny":""," K\xe9rd\xe9s ",i.index+1,""),e.xp6(1),e.Q6J("ngClass",e.VKq(11,K,!i.answerIsSame)),e.xp6(2),e.Oqu(i._question.name),e.xp6(1),e.Q6J("ngIf",i._question.img),e.xp6(1),e.Q6J("ngSwitch",i._question.type),e.xp6(1),e.Q6J("ngSwitchCase",i.QuestionType.imgOnly),e.xp6(1),e.Q6J("ngSwitchCase",i.QuestionType.longText),e.xp6(1),e.Q6J("ngSwitchCase",i.QuestionType.shortText),e.xp6(1),e.Q6J("ngSwitchCase",i.QuestionType.number),e.xp6(1),e.Q6J("ngSwitchCase",i.QuestionType.year))},dependencies:[c.ez,c.mk,c.O5,c.RF,c.n9,p.u5,p.Fj,p.wV,p.JJ,p.On,w.m,M.G],styles:[".holder-question[_ngcontent-%COMP%]{border-radius:8px;border:1px solid black;position:relative;display:flex;flex-direction:column;max-width:400px;height:100%}.holder-question[_ngcontent-%COMP%]   .question-title[_ngcontent-%COMP%]{top:0;left:0;width:100%;background:rgba(0,0,0,.17);padding:5px 10px}.holder-question[_ngcontent-%COMP%]   .question-body[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;gap:10px;background:rgba(0,255,49,.11);flex-grow:1}.holder-question[_ngcontent-%COMP%]   .question-body.differentAnswer[_ngcontent-%COMP%]{background:rgba(0,133,205,.11)}.holder-question[_ngcontent-%COMP%]   .question-body[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:rgba(0,0,0,.13);padding:10px;border-radius:8px}"]}),o})();const W=(0,v.ZF)("game"),V=(0,v.P1)(W,s=>s.teamGameStatus);var h,ee=r(2539),te=r(9516);function ne(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"app-place-card",6),e.NdJ("click",function(){const a=e.CHM(t).$implicit,f=e.oxw();return e.KtG(f.selectPlace(a))}),e.qZA()}if(2&s){const t=o.$implicit,n=o.index,i=e.oxw();e.Q6J("selected",i.selectedPlace===t)("place",t)("index",n)}}function ie(s,o){if(1&s&&(e._UZ(0,"app-question-card",7),e.ALo(1,"async")),2&s){const t=o.$implicit,n=o.index,i=e.oxw();e.Q6J("teamStatus",e.lcZ(1,3,i.teamStatus))("index",n)("question",t)}}class A{constructor(o,t,n,i){this.activatedRoute=o,this.activeGameService=t,this.store=n,this.locationsService=i,this.destroy$=new S.x,this.teamStatus=this.store.select(V),this.gameId=-1,this.myTrackBy=ee.Gp}ngOnInit(){this.activatedRoute.params.subscribe(o=>{const t=o.id;t&&(this.gameId=t,this.locationsService.trackMe(this.gameId),this.activeGame$=this.activeGameService.getActiveGameData(t).pipe((0,d.b)(n=>{this.selectedPlace=n.places[0]})))})}selectPlace(o){o.selectable&&(this.selectedPlace=o)}postAnswers(){const o=[];this.activeGameService.changedAnswers.forEach((t,n)=>{t.imgFile?this.activeGameService.answerQuestionWithImage(n,t.imgFile).pipe((0,_.R)(this.destroy$)).subscribe(i=>{this.activeGameService.changedAnswers.delete(n),this.store.dispatch((0,m.u)({gameState:i}))}):o.push({questionId:n,answer:t})}),o.length>0&&this.activeGameService.answerQuestions(this.gameId,o).pipe((0,_.R)(this.destroy$)).subscribe(t=>{o.forEach(n=>{this.activeGameService.changedAnswers.delete(n.questionId)})})}}(h=A).\u0275fac=function(o){return new(o||h)(e.Y36(k.gz),e.Y36(J),e.Y36(v.yh),e.Y36(te.a))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-active-game"]],standalone:!0,features:[e.jDz],decls:8,vars:6,consts:[[1,"holder-places"],[3,"selected","place","index","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"holder-questions"],[3,"teamStatus","index","question",4,"ngFor","ngForOf","ngForTrackBy"],[1,"section-btn"],[1,"btn-simple",3,"click"],[3,"selected","place","index","click"],[3,"teamStatus","index","question"]],template:function(o,t){if(1&o&&(e.TgZ(0,"div",0),e.YNc(1,ne,1,3,"app-place-card",1),e.ALo(2,"async"),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,ie,2,5,"app-question-card",3),e.qZA(),e.TgZ(5,"div",4)(6,"button",5),e.NdJ("click",function(){return t.postAnswers()}),e._uU(7,"Ment\xe9s"),e.qZA()()),2&o){let n;e.xp6(1),e.Q6J("ngForOf",null==(n=e.lcZ(2,4,t.activeGame$))?null:n.places)("ngForTrackBy",t.myTrackBy),e.xp6(3),e.Q6J("ngForOf",null==t.selectedPlace?null:t.selectedPlace.questions)("ngForTrackBy",t.myTrackBy)}},dependencies:[c.ez,c.sg,c.Ov,z.$,B],styles:[".holder-places[_ngcontent-%COMP%]{display:flex;flex-direction:row;overflow-x:auto;gap:15px;padding:20px 30px;scroll-behavior:smooth}.holder-places[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.holder-questions[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,300px));grid-gap:15px;place-content:center}.section-btn[_ngcontent-%COMP%]{margin:1.5rem auto;display:flex;justify-content:center}"]}),(0,T.gn)([Z.n],A.prototype,"destroy$",void 0);var se=r(7747),oe=r(7278),ae=r(6523),g=r(1993);function re(s,o){1&s&&e._UZ(0,"span",10)}function ce(s,o){1&s&&e._UZ(0,"img",11)}function pe(s,o){1&s&&e._UZ(0,"img",12)}let le=(()=>{var s;class o{constructor(n,i,a){this.userService=n,this.authService=i,this.destroyRef=a,this.$loading=(0,e.tdS)(!1),this.isActive=this.authService.getTokenId()===this.client?.tokenId}ngOnInit(){this.isActive=this.authService.getTokenId()===this.client?.tokenId}revokeAccess(){this.client.tokenId&&(this.$loading.set(!0),this.userService.revokeToken(this.client.tokenId).pipe((0,I.q)(1),(0,g.sL)(this.destroyRef)).subscribe({complete:()=>this.$loading.set(!1),error:()=>this.$loading.set(!1)}))}}return(s=o).\u0275fac=function(n){return new(n||s)(e.Y36(C),e.Y36(x.e),e.Y36(e.ktI))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-client-card"]],inputs:{client:"client"},standalone:!0,features:[e.jDz],decls:13,vars:8,consts:[[1,"client-card"],["title","Akt\xedv eszk\xf6z","class","active",4,"ngIf"],[1,"platform"],[1,"text-size-base"],["title","Mobil kliens","class","img","src","assets/svg/mobile.svg","alt","MobileLogin",4,"ngIf"],[1,"browser","text-size-base"],[1,"ip","text-size-base"],["title","Google azonos\xedt\xe1s","class","img img-google","src","assets/svg/google.svg","alt","GoogleLogin",4,"ngIf"],["title","T\xf6rl\xe9s",1,"btn-remove","btn",3,"disabled","click"],["src","assets/svg/remove.svg","alt","Remove",1,"img"],["title","Akt\xedv eszk\xf6z",1,"active"],["title","Mobil kliens","src","assets/svg/mobile.svg","alt","MobileLogin",1,"img"],["title","Google azonos\xedt\xe1s","src","assets/svg/google.svg","alt","GoogleLogin",1,"img","img-google"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0),e.YNc(1,re,1,0,"span",1),e.TgZ(2,"div",2)(3,"p",3),e._uU(4),e.qZA(),e.YNc(5,ce,1,0,"img",4),e.qZA(),e.TgZ(6,"p",5),e._uU(7),e.qZA(),e.TgZ(8,"p",6),e._uU(9),e.qZA(),e.YNc(10,pe,1,0,"img",7),e.TgZ(11,"button",8),e.NdJ("click",function(){return i.revokeAccess()}),e._UZ(12,"img",9),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("ngIf",i.isActive),e.xp6(3),e.AsE("Rendszer: ",i.client.platform," ",i.client.isMobile,""),e.xp6(1),e.Q6J("ngIf",i.client.isMobile||"Android"===i.client.platform),e.xp6(2),e.hij("B\xf6ng\xe9sz\u0151: ",i.client.brand,""),e.xp6(2),e.hij("IP c\xedm: ",i.client.ipAddress,""),e.xp6(1),e.Q6J("ngIf",i.client.isGoogle),e.xp6(1),e.Q6J("disabled",i.$loading()))},dependencies:[c.ez,c.O5],styles:[".img[_ngcontent-%COMP%]{width:20px;aspect-ratio:1;object-fit:cover}p[_ngcontent-%COMP%]{width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.img-google[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px}.btn-remove[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:10px}.platform[_ngcontent-%COMP%]{display:flex;gap:10px;flex-direction:row}.active[_ngcontent-%COMP%]{position:absolute;top:5px;left:5px;aspect-ratio:1;border-radius:100%;background:rgb(78,255,47);width:10px;display:block}.client-card[_ngcontent-%COMP%]{overflow:hidden;position:relative;background-color:#fff;padding:12px;border-radius:8px;width:100%;box-shadow:3px 3px 5px 2px #00000061}"],changeDetection:0}),o})(),de=(()=>{var s;class o{}return(s=o).\u0275fac=function(n){return new(n||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-toggler"]],inputs:{isOn:"isOn"},standalone:!0,features:[e.jDz],decls:4,vars:1,consts:[[1,"toggler"],["type","checkbox",3,"ngModel"],[1,"toggler-bg"],[1,"toggler-ball"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"input",1),e.TgZ(2,"span",2),e._UZ(3,"span",3),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("ngModel",i.isOn))},dependencies:[c.ez,p.u5,p.Wl,p.JJ,p.On],styles:[".toggler[_ngcontent-%COMP%]{position:relative;width:70px;height:30px;background-color:silver;padding:3px;border-radius:20px;cursor:pointer}.toggler[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{z-index:1;visibility:hidden;cursor:pointer;top:0;left:0;position:absolute;height:100%;width:100%}.toggler[_ngcontent-%COMP%]   .toggler-bg[_ngcontent-%COMP%]{border-radius:20px;position:absolute;width:100%;height:-moz-fit-content;height:fit-content;top:4px;left:5px;transition:all .3s}.toggler[_ngcontent-%COMP%]   .toggler-bg[_ngcontent-%COMP%]   .toggler-ball[_ngcontent-%COMP%]{position:absolute;aspect-ratio:1;transition:all .3s;width:30%;border-radius:20px;background-color:red}.toggler[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked ~ .toggler-bg[_ngcontent-%COMP%]{transform:translate(calc(70% - 10px));-webkit-transform:translateX(calc(70% - 10px))}.toggler[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked ~ .toggler-bg[_ngcontent-%COMP%]   .toggler-ball[_ngcontent-%COMP%]{background-color:green}"],changeDetection:0}),o})();var ge=r(9315),ue=r(2644);function me(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"app-buttons",39),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.addMember())}),e.qZA()}}function he(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"app-text-input",9),e.NdJ("valueChange",function(i){e.CHM(t);const a=e.oxw(2);return e.KtG(a.$profile().members[0]=i)}),e.qZA()}if(2&s){const t=e.oxw(2);e.Q6J("label","Tag1:")("value",t.$profile().members[0])}}function fe(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"app-text-input",9),e.NdJ("valueChange",function(i){e.CHM(t);const a=e.oxw(2);return e.KtG(a.$profile().members[1]=i)}),e.qZA()}if(2&s){const t=e.oxw(2);e.Q6J("label","Tag2:")("value",t.$profile().members[1])}}function _e(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"app-text-input",9),e.NdJ("valueChange",function(i){e.CHM(t);const a=e.oxw(2);return e.KtG(a.$profile().members[2]=i)}),e.qZA()}if(2&s){const t=e.oxw(2);e.Q6J("label","Tag3:")("value",t.$profile().members[2])}}function xe(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"app-text-input",9),e.NdJ("valueChange",function(i){e.CHM(t);const a=e.oxw(2);return e.KtG(a.$profile().members[3]=i)}),e.qZA()}if(2&s){const t=e.oxw(2);e.Q6J("label","Tag4:")("value",t.$profile().members[3])}}function Ce(s,o){if(1&s&&(e.TgZ(0,"p",40),e._uU(1),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.hij("*V\xe1ltoztat\xe1s alatt: ",t.$profile().nextEmail,"")}}function ve(s,o){1&s&&e._UZ(0,"img",41)}function be(s,o){1&s&&e._UZ(0,"app-client-card",42),2&s&&e.Q6J("client",o.$implicit)}function we(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"section",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),e._UZ(5,"img",6),e.TgZ(6,"input",7),e.NdJ("change",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.readFile(i))}),e.qZA(),e._UZ(7,"img",8),e.ALo(8,"imgSrc"),e.qZA(),e.TgZ(9,"app-text-input",9),e.NdJ("valueChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.$profile().name=i)}),e.qZA(),e.TgZ(10,"div",10)(11,"div",11)(12,"p",12),e._uU(13,"Csapattagok:"),e.qZA(),e.YNc(14,me,1,0,"app-buttons",13),e.qZA(),e.YNc(15,he,1,2,"app-text-input",14),e.YNc(16,fe,1,2,"app-text-input",14),e.YNc(17,_e,1,2,"app-text-input",14),e.YNc(18,xe,1,2,"app-text-input",14),e.qZA(),e.TgZ(19,"button",15),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.saveProfile())}),e._uU(20,"Ment\xe9s"),e.qZA()()(),e.TgZ(21,"div",16)(22,"div"),e.YNc(23,Ce,2,1,"p",17),e.TgZ(24,"app-text-input",9),e.NdJ("valueChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.$profile().email=i)}),e.qZA()(),e.TgZ(25,"button",18),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.saveEmail())}),e._uU(26,"M\xf3dos\xedt\xe1s"),e.qZA()(),e.TgZ(27,"form",19)(28,"h3",20),e._uU(29,"Jelsz\xf3 m\xf3dos\xedt\xe1sa:"),e.qZA(),e._UZ(30,"input",21)(31,"input",22)(32,"input",23),e.TgZ(33,"button",18),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.savePassword())}),e._uU(34,"M\xf3dos\xedt\xe1s"),e.qZA()()(),e.TgZ(35,"div",24)(36,"div",25)(37,"h3",26),e._uU(38,"Push \xe9rtes\xedt\xe9sek"),e.qZA(),e.TgZ(39,"p",27),e._uU(40,"Enged\xe9ly ezen az eszk\xf6z\xf6n"),e.qZA(),e.TgZ(41,"div",28),e.YNc(42,ve,1,0,"img",29),e.TgZ(43,"app-toggler",30),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.togglePushNoti())}),e.qZA()()(),e.TgZ(44,"div",31)(45,"h3",26),e._uU(46,"Bejelentkezett eszk\xf6z\xf6k:"),e.qZA(),e.TgZ(47,"div",32),e.YNc(48,be,1,1,"app-client-card",33),e.qZA()(),e.TgZ(49,"div",34)(50,"h3",35),e._uU(51,"Felhaszn\xe1l\xf3 t\xf6rl\xe9se"),e.qZA(),e._UZ(52,"input",36,37),e.TgZ(54,"button",38),e.NdJ("click",function(){e.CHM(t);const i=e.MAs(53),a=e.oxw();return e.KtG(a.deleteAccount(i.value))}),e._uU(55,"Felhaszn\xe1l\xf3 t\xf6rl\xe9se"),e.qZA()()()()}if(2&s){const t=e.oxw();let n;e.xp6(7),e.Q6J("src",null!==(n=t.$newImageSrc())&&void 0!==n?n:e.lcZ(8,20,t.$profile().img),e.LSH),e.xp6(2),e.Q6J("label","Csapatn\xe9v:")("value",t.$profile().name),e.xp6(5),e.Q6J("ngIf",t.$profile().members.length<4),e.xp6(1),e.Q6J("ngIf",t.$profile().members[0]),e.xp6(1),e.Q6J("ngIf",t.$profile().members[1]),e.xp6(1),e.Q6J("ngIf",t.$profile().members[2]),e.xp6(1),e.Q6J("ngIf",t.$profile().members[3]),e.xp6(1),e.Q6J("disabled",(t.isSame||t.$saving())&&!t.$newImageSrc()),e.xp6(4),e.Q6J("ngIf",""!==t.$profile().nextEmail),e.xp6(1),e.Q6J("label","Email:")("value",t.$profile().email),e.xp6(1),e.Q6J("disabled",t.$saving()||t.isEmailSame),e.xp6(2),e.Q6J("formGroup",t.passwordForm),e.xp6(6),e.Q6J("disabled",t.$saving()||!t.passwordForm.valid),e.xp6(9),e.Q6J("ngIf","blocked"===t.$pushState()),e.xp6(1),e.Q6J("isOn","true"===t.$pushState()),e.xp6(5),e.Q6J("ngForOf",t.$profile().clients),e.xp6(4),e.ekj("nodeleting",!t.$deleting())}}let Me=(()=>{var s;class o{constructor(n,i,a,f,Ae){this.userService=n,this.authService=i,this.pushService=a,this.destroyRef=f,this.fb=Ae,this.$profile=(0,e.tdS)({id:-1,name:"Ismeretlen",email:"",nextEmail:"",role:"ROLE_USER",members:[],clients:[]}),this.$saving=(0,e.tdS)(!1),this.$deleting=(0,e.tdS)(!1),this.$pushState=this.pushService.$state,this.$newImageSrc=(0,e.tdS)(void 0),(0,e.cEC)(()=>{const q=this.authService.$currentTeamR();if(q){const y={...q};y.members=[...y.members],this.$profile.set(y)}},{allowSignalWrites:!0}),this.passwordForm=this.fb.group({oldPassword:["",[p.kI.required]],password:["",[p.kI.required]],confirmPassword:["",[p.kI.required,(0,ae.Z)()]]})}addMember(){this.$profile().members.push("J\xe1t\xe9kos neve")}get isSame(){return JSON.stringify(this.$profile())===JSON.stringify(this.authService.$currentTeamR())}get isEmailSame(){return this.$profile().email===this.authService.$currentTeamR()?.email}saveProfile(){this.$saving.set(!0);const n=[];if(!this.isSame){const i={name:this.$profile().name,members:this.$profile().members};n.push(this.userService.updateProfile(i).pipe((0,g.sL)(this.destroyRef)))}this.$newImageSrc()&&this.newImgFile&&n.push(this.userService.updateImage(this.newImgFile).pipe((0,d.b)(()=>{this.newImgFile=void 0,this.$newImageSrc.set(void 0)}),(0,g.sL)(this.destroyRef))),(0,ge.D)(n).subscribe({complete:()=>this.$saving.set(!1),error:()=>this.$saving.set(!1)})}saveEmail(){this.$saving.set(!0),this.userService.updateEmail(this.$profile().email).pipe((0,g.sL)(this.destroyRef)).subscribe({complete:()=>this.$saving.set(!1)})}savePassword(){this.$saving.set(!0),this.userService.updatePassword({oldPassword:this.passwordForm.value.oldPassword,newPassword:this.passwordForm.value.password}).pipe((0,g.sL)(this.destroyRef)).subscribe({complete:()=>this.$saving.set(!1)})}togglePushNoti(){"true"===this.$pushState()?this.pushService.unsubscribeFromTopic().subscribe():("false"===this.$pushState()||"blocked"===this.$pushState())&&this.pushService.requestPushNoti()}readFile(n){if(n.target.files&&n.target.files[0]){const i=n.target.files[0];this.newImgFile=i;const a=new FileReader;a.onload=()=>this.$newImageSrc.set(a.result),a.readAsDataURL(i)}}deleteAccount(n=void 0){this.$deleting()&&n&&n.length>0?this.userService.deleteAccount(n).pipe((0,g.sL)(this.destroyRef)).subscribe():this.$deleting.set(!0)}}return(s=o).\u0275fac=function(n){return new(n||s)(e.Y36(C),e.Y36(x.e),e.Y36(ue.K),e.Y36(e.ktI),e.Y36(p.qu))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],standalone:!0,features:[e.jDz],decls:1,vars:1,consts:[["class","profile",4,"ngIf"],[1,"profile"],[1,"profile-inside"],[1,"profile-data"],[1,"infos"],[1,"img-container"],["src","assets/svg/edit.svg","alt","Edit",1,"img-edit"],["type","file",3,"change"],["alt","Avatar",3,"src"],["type","editable",3,"label","value","valueChange"],[1,"members"],[1,"title"],[1,"text-size-base"],["classes","hover:scale-110 active:opacity-70 transition","iconSrc","assets/svg/add.svg","type","icon",3,"click",4,"ngIf"],["type","editable",3,"label","value","valueChange",4,"ngIf"],[1,"btn-simple","w-fit","self-center",3,"disabled","click"],[1,"profile-email"],["class","txt-warning-red",4,"ngIf"],[1,"btn-simple-red","w-fit","self-center",3,"disabled","click"],[1,"profile-password",3,"formGroup"],[1,"text-center","text-size-base","bold"],["autocomplete","off","formControlName","oldPassword","type","password","placeholder","R\xe9gi jelsz\xf3",1,"simpleInput"],["autocomplete","off","formControlName","password","type","password","placeholder","\xdaj jelsz\xf3",1,"simpleInput"],["autocomplete","off","formControlName","confirmPassword","type","password","placeholder","\xdaj jelsz\xf3 m\xe9gegyszer",1,"simpleInput"],[1,"right"],[1,"push"],[1,"text-size-lg","text-center","bold"],[1,"text-size-base","text-center","bold"],[1,"push-t"],["title","\xc9rtes\xedt\xe9sek Kikapcsolva az eszk\xf6z\xf6n","src","assets/svg/warning-yellow.svg","alt","Push blocked Warning",4,"ngIf"],[3,"isOn","click"],[1,"profile-loggedin"],[1,"profile-clients"],[3,"client",4,"ngFor","ngForOf"],[1,"delete-card"],[1,"text-size-lg","bold"],["autocomplete","off","type","password","placeholder","Jelsz\xf3",1,"simpleInput"],["pass",""],[1,"btn-simple-red",3,"click"],["classes","hover:scale-110 active:opacity-70 transition","iconSrc","assets/svg/add.svg","type","icon",3,"click"],[1,"txt-warning-red"],["title","\xc9rtes\xedt\xe9sek Kikapcsolva az eszk\xf6z\xf6n","src","assets/svg/warning-yellow.svg","alt","Push blocked Warning"],[3,"client"]],template:function(n,i){1&n&&e.YNc(0,we,56,22,"section",0),2&n&&e.Q6J("ngIf",void 0!==i.$profile())},dependencies:[c.ez,c.sg,c.O5,p.UX,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,se.t,oe.O,le,de,w.m,M.G],styles:['[_nghost-%COMP%]{height:100%}.delete-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:16px;background:black;width:min(350px,100%);border-radius:8px;gap:14px;box-shadow:3px 3px 5px 2px #00000061;color:#fff}.delete-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{overflow:hidden;transition:all .3s;color:#000}.delete-card[_ngcontent-%COMP%]   input.nodeleting[_ngcontent-%COMP%]{height:0;padding:0;box-shadow:none;border:none}.right[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:30px;align-items:center;width:-webkit-fill-available;border-radius:10px;background-color:#fff;padding:16px;height:-moz-fit-content;height:fit-content}@media (max-width: 800px){.right[_ngcontent-%COMP%]{max-width:400px}}.push[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:10px;background:white;border-radius:8px;gap:5px;box-shadow:3px 3px 5px 2px #00000061}.push[_ngcontent-%COMP%]   .push-t[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:10px}.push[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;width:30px;aspect-ratio:1}.profile-loggedin[_ngcontent-%COMP%]{width:100%}.profile-loggedin[_ngcontent-%COMP%]   .profile-clients[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,350px));gap:18px;justify-content:center;width:100%}.profile-email[_ngcontent-%COMP%], .profile-password[_ngcontent-%COMP%]{border-radius:8px;width:100%;padding:1.5rem;background-color:#fff;display:flex;flex-direction:column;gap:14px}.profile-email[_ngcontent-%COMP%]   .txt-warning-red[_ngcontent-%COMP%], .profile-password[_ngcontent-%COMP%]   .txt-warning-red[_ngcontent-%COMP%]{color:red;text-align:right;font-size:12px}.profile[_ngcontent-%COMP%]{padding:1rem;display:flex;flex-direction:row;gap:2rem;justify-content:center;margin-left:80px}@media (max-width: 800px){.profile[_ngcontent-%COMP%]{margin-left:0;flex-direction:column;gap:1rem;align-items:center}}.profile[_ngcontent-%COMP%]   .profile-inside[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;align-items:center;width:100%;max-width:400px}.profile-data[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse;align-items:center;gap:20px;width:100%;background-color:#fff;padding:1.5rem;border-radius:8px}.profile-data[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:100%;object-fit:cover;aspect-ratio:1;width:100%}.profile-data[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:before{content:" ";display:block;position:absolute;height:100%;width:100%;background-repeat:no-repeat;background-size:cover;background-image:url(avatar.20a5d91f20916181.svg)}.profile-data[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:300px;gap:20px}.profile-data[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]{position:relative}.profile-data[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]::-webkit-file-upload-button{cursor:pointer}.profile-data[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{top:0;z-index:2;cursor:pointer;opacity:0;width:20px;overflow:hidden;right:0;position:absolute}.profile-data[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]   .img-edit[_ngcontent-%COMP%]{top:0;right:0;z-index:1;border-radius:0;width:20px;object-fit:contain;aspect-ratio:1;position:absolute}.profile-data[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]   .members[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;gap:5px}.profile-data[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]   .members[_ngcontent-%COMP%]   app-text-input[_ngcontent-%COMP%]{margin-left:10px}.profile-data[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]   .members[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:max-content;align-items:center;gap:10px}.profile-data[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]   .members[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   app-buttons[_ngcontent-%COMP%]{height:30px;width:30px}'],changeDetection:0}),o})();var b=r(92);const Pe=[{path:b.x.user.home.path,component:Q},{path:b.x.user.active.path,component:A},{path:b.x.user.profile.path,component:Me},{path:"**",redirectTo:b.x.user.home.path}]}}]);