"use strict";(self.webpackChunkszititour=self.webpackChunkszititour||[]).push([[545],{8545:(k,f,a)=>{a.r(f),a.d(f,{PlaceModule:()=>S});var u=a(6895),e=a(8256),r=a(3904),c=a(6368),_=a(8122),g=a(5079),p=(()=>{return(i=p||(p={}))[i.shortText=0]="shortText",i[i.longText=1]="longText",i[i.number=2]="number",i[i.imgOnly=3]="imgOnly",i[i.year=4]="year",p;var i})(),b=a(1864),E=a(3952),m=a(9009);function q(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"app-buttons",8),e.NdJ("click",function(o){e.CHM(t);const n=e.oxw();return o.stopPropagation(),e.KtG(n.openEditDialog())}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("type",t.ButtonType.iconButton)}}function C(i,l){if(1&i&&(e.TgZ(0,"div",9)(1,"div",10)(2,"p",11),e._uU(3,"Riddle:"),e.qZA(),e.TgZ(4,"p",12),e._uU(5),e.qZA()(),e.TgZ(6,"div",10)(7,"p",11),e._uU(8,"Type:"),e.qZA(),e.TgZ(9,"p",12),e._uU(10),e.qZA()(),e._UZ(11,"img",13),e.qZA()),2&i){const t=e.oxw();e.xp6(5),e.Oqu(t.question.riddle?"true":"false"),e.xp6(5),e.Oqu(t.question.type),e.xp6(1),e.Q6J("src",t.question.img,e.LSH)}}let x=(()=>{class i{constructor(){this.ButtonType=g.L,this.onEditPressed=new e.vpe,this.open=!1}ngOnInit(){}toggle(t){this.open=!this.open,t.stopPropagation()}openEditDialog(){this.onEditPressed.emit()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-question"]],inputs:{question:"question"},outputs:{onEditPressed:"onEditPressed"},decls:9,vars:5,consts:[[1,"p-5","mobile:px-3","w-full","hover:border-amber-600","rounded","border-1","border-transparent","shadow","mb-1",3,"click"],[1,"flex","w-full","justify-between","items-center"],[1,"flex","w-fit","max-w-full","gap-[10%]","items-center"],[1,"text-size-base","font-bold","flex-wrap","w-fit"],["classes","min-w-[18px]","iconSrc","assets/svg/edit.svg",3,"type","click",4,"ngIf"],["src","assets/svg/anchor-down-black.svg","alt","Dropdown",1,"cursor-pointer",3,"ngClass"],[1,"transition-all",3,"ngClass","click"],["class","flex flex-col gap-4",4,"ngIf"],["classes","min-w-[18px]","iconSrc","assets/svg/edit.svg",3,"type","click"],[1,"flex","flex-col","gap-4"],[1,"flex","gap-2","mobile:flex-col"],[1,"text-size-base","font-bold"],[1,"text-size-base"],["alt","",1,"object-contain","max-h-[300px]","aspect-video",3,"src"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.NdJ("click",function(n){return s.toggle(n)}),e.TgZ(1,"div",1)(2,"div",2)(3,"p",3),e._uU(4),e.qZA(),e.YNc(5,q,1,1,"app-buttons",4),e.qZA(),e._UZ(6,"img",5),e.qZA(),e.TgZ(7,"div",6),e.NdJ("click",function(n){return n.stopPropagation()}),e.YNc(8,C,12,3,"div",7),e.qZA()()),2&t&&(e.xp6(4),e.Oqu(s.question.name),e.xp6(1),e.Q6J("ngIf",s.open),e.xp6(1),e.Q6J("ngClass",s.open?"rotate-180":""),e.xp6(1),e.Q6J("ngClass",s.open?"h-fit mt-5":"h-0"),e.xp6(1),e.Q6J("ngIf",s.open))},dependencies:[u.mk,u.O5,m.O]}),i})();var y=a(385),d=a(433);let T=(()=>{class i{constructor(t,s){this.adminService=t,this.alert=s,this.ButtonType=g.L,this.isEdit=!1,this.question={id:0,img:"",name:"",type:p.shortText,placeId:1,riddle:!1},this.onExit=new e.vpe,this.saving=!1,this.deleting=!1}ngOnInit(){}save(){this.isEdit?(console.log(this.question.riddle,"saving"),this.saving=!0,this.subscriptionSave=this.adminService.updateQuestion(this.question).subscribe({next:t=>{this.alert.success("Question successfully updated"),this.saving=!1,this.onExit.emit({action:"update",question:t})},error:t=>{this.saving=!1}})):(this.saving=!0,this.subscriptionSave=this.adminService.createQuestion(this.question).subscribe({next:t=>{this.alert.success("Question successfully created"),this.saving=!1,this.onExit.emit({action:"create",question:t})},error:t=>{this.saving=!1}}))}delete(){window.confirm("Are you sure to delete this question?")&&(this.deleting=!0,this.subscriptionDelete=this.adminService.deleteQuestion(this.question.id).subscribe({next:s=>{this.alert.success("Question successfully deleted"),this.deleting=!1,this.onExit.emit({action:"delete",question:this.question})},error:s=>{this.deleting=!1}}))}ngOnDestroy(){this.subscriptionSave?.unsubscribe(),this.subscriptionDelete?.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(c.l),e.Y36(b.jE))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-question-edit"]],inputs:{isEdit:"isEdit",question:"question"},outputs:{onExit:"onExit"},decls:31,vars:10,consts:[[1,"relative","bg-white","p-5","rounded","overflow-y-auto","max-h-[80vh]","flex-col","gap-2","flex"],[1,"text-size-h3","text-center","w-full","font-bold","mb-6"],[1,"text-size-base"],["type","text",1,"simpleInput",3,"ngModel","ngModelChange"],[1,"flex","gap-2"],["type","checkbox",3,"checked","change"],[3,"ngModel","ngModelChange"],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["type","file","accept","image/*"],[1,"w-full","flex","justify-between"],["classes","bg-red-600 hover:bg-red-700","text","Delete",3,"isDisabledBlocked","isDisabledProgress","type","onClicked"],[3,"isDisabledProgress","text","type","onClicked"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"p",1),e._uU(2),e.qZA(),e.TgZ(3,"label",2),e._uU(4,"Name:"),e.qZA(),e.TgZ(5,"input",3),e.NdJ("ngModelChange",function(n){return s.question.name=n}),e.qZA(),e.TgZ(6,"div",4)(7,"label",2),e._uU(8,"Riddle:"),e.qZA(),e.TgZ(9,"input",5),e.NdJ("change",function(){return s.question.riddle=!s.question.riddle}),e.qZA()(),e.TgZ(10,"div",4)(11,"label",2),e._uU(12,"Question Type:"),e.qZA(),e.TgZ(13,"select",6),e.NdJ("ngModelChange",function(n){return s.question.type=n}),e.TgZ(14,"option",7),e._uU(15,"Short Text"),e.qZA(),e.TgZ(16,"option",8),e._uU(17,"Long Text"),e.qZA(),e.TgZ(18,"option",9),e._uU(19,"Number"),e.qZA(),e.TgZ(20,"option",10),e._uU(21,"Image"),e.qZA(),e.TgZ(22,"option",11),e._uU(23,"Year"),e.qZA()()(),e.TgZ(24,"div",4)(25,"label",2),e._uU(26,"Image:"),e.qZA(),e._UZ(27,"input",12),e.qZA(),e.TgZ(28,"div",13)(29,"app-buttons",14),e.NdJ("onClicked",function(){return s.delete()}),e.qZA(),e.TgZ(30,"app-buttons",15),e.NdJ("onClicked",function(){return s.save()}),e.qZA()()()),2&t&&(e.xp6(2),e.Oqu(s.isEdit?"K\xe9rd\xe9s szerkeszt\xe9se":"K\xe9rd\xe9s l\xe9trehoz\xe1sa"),e.xp6(3),e.Q6J("ngModel",s.question.name),e.xp6(4),e.Q6J("checked",s.question.riddle),e.xp6(4),e.Q6J("ngModel",s.question.type),e.xp6(16),e.Q6J("isDisabledBlocked",!s.isEdit)("isDisabledProgress",s.deleting)("type",s.ButtonType.simple),e.xp6(1),e.Q6J("isDisabledProgress",s.saving)("text",s.isEdit?"Ment\xe9s":"L\xe9trehoz\xe1s")("type",s.ButtonType.simple))},dependencies:[m.O,d.YN,d.Kr,d.Fj,d.EJ,d.JJ,d.On]}),i})();function Z(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"app-question",17),e.NdJ("onEditPressed",function(){const n=e.CHM(t).$implicit,N=e.oxw();return e.KtG(N.openEditQuestionDialog(n))}),e.qZA()}2&i&&e.Q6J("question",l.$implicit)}let Q=(()=>{class i{constructor(t,s,o){this.adminService=t,this.alert=s,this.router=o,this.ButtonType=g.L,this.TextInputType=_.L,this.isEdit=!1,this.placeChange=new e.vpe,this.editModalVisible=!1,this.isEditQuestion=!1,this.saving=!1,this.deleting=!1}ngOnInit(){this.resetQuestion()}resetQuestion(){this.selectedQuestion={id:0,name:"",placeId:this.place.id,img:"",type:p.shortText,riddle:!1}}savePlace(){this.isEdit?(this.saving=!0,this.subscriptionSave=this.adminService.updatePlace(this.place).subscribe({next:t=>{this.alert.success(`${t.name} place Successfully updated`),this.saving=!1},error:t=>{this.saving=!1}})):(this.saving=!0,this.subscriptionSave=this.adminService.addPlaceToGame(this.place).subscribe({next:t=>{this.alert.success(`${t.name} place Successfully created`),this.saving=!1,this.router.navigateByUrl(`/admin-place/${t.gameId}/${t.id}`)},error:t=>{this.saving=!1}}))}deletePlace(){window.confirm(`Are you sure to delete ${this.place.name}?`)&&(this.deleting=!0,this.subscriptionDelete=this.adminService.deletePlace(this.place.id).subscribe({next:s=>{this.alert.success(`${this.place.name} place Successfully deleted`),this.deleting=!1,this.router.navigateByUrl("/admin")},error:s=>{this.deleting=!1}}))}openNewQuestionDialog(){this.resetQuestion(),this.isEditQuestion=!1,this.editModalVisible=!0}openEditQuestionDialog(t){this.selectedQuestion={...t},console.log("editing: ",this.selectedQuestion),this.isEditQuestion=!0,this.editModalVisible=!0}editQuestionDialogExited(t){switch(console.log("edited: ",t.question),this.editModalVisible=!1,console.log(t),t.action){case"create":this.place.questions.push(t.question);break;case"delete":const s=this.place.questions.find(n=>n.id===t.question.id);if(s){const n=this.place.questions.indexOf(s);n>-1&&this.place.questions.splice(n,1)}break;case"update":const o=this.place.questions.find(n=>n.id===t.question.id);if(o){const n=this.place.questions.indexOf(o);n>-1&&this.place.questions.splice(n,1),this.place.questions.push(t.question)}}}ngOnDestroy(){this.subscriptionSave?.unsubscribe(),this.subscriptionDelete?.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(c.l),e.Y36(b.jE),e.Y36(r.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit-place"]],inputs:{isEdit:"isEdit",place:"place"},outputs:{placeChange:"placeChange"},decls:20,vars:17,consts:[[1,"w-full","bg-white","shadow-2xl","rounded","flex","flex-col","p-5","gap-2","h-full","max-h-[75vh]","mobile:max-h-max"],[1,"flex","w-full","mobile:flex-col","justify-between","gap-2","h-[90%]"],[1,"w-[45%]","p-5","mobile:w-full"],[1,"text-size-lg","mb-5","bold"],["classes","w-fit mb-5",3,"value","label","type","valueChange"],[1,"border-1","w-full"],["alt","place image",1,"aspect-video",3,"src"],[1,"w-[45%]","p-5","mobile:w-full","rounded","border-kon-blue","border-1","h-[100%]","overflow-y-auto"],[1,"flex","gap-2","items-center"],[1,"text-size-lg","bold"],["classes","aspect-square w-[30px] hover:scale-110 active:opacity-70 transition","iconSrc","assets/svg/add.svg",3,"type","onClicked"],[3,"question","onEditPressed",4,"ngFor","ngForOf"],[1,"flex","justify-between","w-full"],["text","Delete","classes","bg-red-600 hover:bg-red-800",3,"type","isDisabledProgress","onClicked"],[3,"type","text","isDisabledProgress","onClicked"],[3,"isDisplayed","isDisplayedChange"],[3,"isEdit","question","onExit"],[3,"question","onEditPressed"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p",3),e._uU(4,"Helysz\xedn inform\xe1ci\xf3k:"),e.qZA(),e.TgZ(5,"app-text-input",4),e.NdJ("valueChange",function(n){return s.place.name=n}),e.qZA(),e.TgZ(6,"app-text-input",4),e.NdJ("valueChange",function(n){return s.place.address=n}),e.qZA(),e.TgZ(7,"div",5),e._UZ(8,"img",6),e.qZA()(),e.TgZ(9,"div",7)(10,"div",8)(11,"p",9),e._uU(12,"K\xe9rd\xe9sek:"),e.qZA(),e.TgZ(13,"app-buttons",10),e.NdJ("onClicked",function(){return s.openNewQuestionDialog()}),e.qZA()(),e.YNc(14,Z,1,1,"app-question",11),e.qZA()(),e.TgZ(15,"div",12)(16,"app-buttons",13),e.NdJ("onClicked",function(){return s.deletePlace()}),e.qZA(),e.TgZ(17,"app-buttons",14),e.NdJ("onClicked",function(){return s.savePlace()}),e.qZA()(),e.TgZ(18,"app-modal",15),e.NdJ("isDisplayedChange",function(n){return s.editModalVisible=n}),e.TgZ(19,"app-question-edit",16),e.NdJ("onExit",function(n){return s.editQuestionDialogExited(n)}),e.qZA()()()),2&t&&(e.xp6(5),e.Q6J("value",s.place.name)("label","Neve:")("type",s.TextInputType.editableP),e.xp6(1),e.Q6J("value",s.place.address)("label","C\xedme:")("type",s.TextInputType.editableP),e.xp6(2),e.Q6J("src",s.place.img,e.LSH),e.xp6(5),e.Q6J("type",s.ButtonType.iconButton),e.xp6(1),e.Q6J("ngForOf",s.place.questions),e.xp6(2),e.Q6J("type",s.ButtonType.simple)("isDisabledProgress",s.deleting),e.xp6(1),e.Q6J("type",s.ButtonType.simple)("text",s.isEdit?"Save":"Create")("isDisabledProgress",s.saving),e.xp6(1),e.Q6J("isDisplayed",s.editModalVisible),e.xp6(1),e.Q6J("isEdit",s.isEditQuestion)("question",s.selectedQuestion))},dependencies:[u.sg,E.t,m.O,x,y.z,T]}),i})(),P=(()=>{class i{constructor(t,s){this.route=t,this.adminService=s,this.place={id:0,name:"Place Name",img:"",gameId:0,address:"Place Address",latitude:"0",longitude:"0",questions:[]},this.placeId=0,this.isEdit=!0}ngOnInit(){this.route.params.subscribe(t=>{const s=t.placeId,o=t.gameId;"new"===s?(this.isEdit=!1,this.placeId=0,this.place={id:0,name:"Place Name",img:"",gameId:o,address:"Place Address",latitude:"0",longitude:"0",questions:[]}):(this.placeId=s,this.isEdit=!0,this.getPlace())})}getPlace(){this.subscriptionGet=this.adminService.getPlaceById(this.placeId).subscribe({next:t=>{this.place=t},error:t=>{}})}ngOnDestroy(){this.subscriptionGet?.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(r.gz),e.Y36(c.l))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-place"]],decls:2,vars:2,consts:[[1,"h-full","w-full","p-5","flex","justify-center","bg-smoke"],[1,"w-full",3,"isEdit","place","placeChange"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"app-edit-place",1),e.NdJ("placeChange",function(n){return s.place=n}),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("isEdit",s.isEdit)("place",s.place))},dependencies:[Q]}),i})();var v=a(4556),h=a(280);let A=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[u.ez,h.F]}),i})();var J=a(2693);let w=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[u.ez,v.N,h.F,d.u5]}),i})(),D=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[u.ez,v.N,h.F,A,J.z,w]}),i})();const M=[{path:"",component:P}];let S=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[u.ez,r.Bz.forChild(M),D]}),i})()}}]);